# ë¯¸êµ¬í˜„ í•­ëª© ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì‘ì„±ì¼**: 2026-01-26  
**ë²„ì „**: 1.7  
**ê²€ì¦ ê¸°ì¤€**: ì‹¤ì œ ì½”ë“œë² ì´ìŠ¤ í™•ì¸ ì™„ë£Œ

---

## ğŸ“‹ ëª©ì°¨

1. [Backend ë¯¸êµ¬í˜„ í•­ëª©](#1-backend-ë¯¸êµ¬í˜„-í•­ëª©)
2. [Frontend ë¯¸êµ¬í˜„ í•­ëª©](#2-frontend-ë¯¸êµ¬í˜„-í•­ëª©)
3. [Server A ì—°ë™ ë¯¸êµ¬í˜„ í•­ëª©](#3-server-a-ì—°ë™-ë¯¸êµ¬í˜„-í•­ëª©)
4. [ìš°ì„ ìˆœìœ„ë³„ ì •ë¦¬](#4-ìš°ì„ ìˆœìœ„ë³„-ì •ë¦¬)

---

## 1. Backend ë¯¸êµ¬í˜„ í•­ëª©

### 1.1 í•„ìˆ˜ ë¯¸êµ¬í˜„ (Phase 5.2)

#### âœ… Phase 5.2: ì»¨í…ìŠ¤íŠ¸ ì ˆì•½ ìš”ì•½ ê¸°ëŠ¥ (ë¶€ë¶„ êµ¬í˜„ ì™„ë£Œ)

**íŒŒì¼**: `server-b/backend/app/services/context_manager.py`

**í˜„ì¬ ìƒíƒœ**: âœ… **ë¶€ë¶„ êµ¬í˜„ ì™„ë£Œ** (2026-01-27)

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] `app/services/` ë””ë ‰í† ë¦¬ ìƒì„± âœ…
- [x] Redis (ì„ íƒ): `redis` íŒ¨í‚¤ì§€ ìˆìœ¼ë©´ `REDIS_URL` ì‚¬ìš©, ì‹¤íŒ¨ ì‹œ ë¹„í™œì„± âœ…
- [x] `redis` íŒ¨í‚¤ì§€ ì„¤ì¹˜ (`pip install redis`) â€” ì„ íƒ, ì—†ìœ¼ë©´ ë©”ëª¨ë¦¬/DBë§Œ ì‚¬ìš© âœ…
- [ ] `tiktoken` íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ì„ íƒ, í† í° ê³„ì‚°ìš©)
- [x] `ContextManager` í´ë˜ìŠ¤ êµ¬í˜„ âœ…
- [x] ì„¸ì…˜ë³„ ìš”ì•½ ì €ì¥/ì¡°íšŒ: Redis â†’ DB(ChatSummary) â†’ Memory ìš°ì„ ìˆœìœ„ âœ…
- [ ] í† í° ìˆ˜ ê³„ì‚° ë° ëª¨ë‹ˆí„°ë§ (ë¯¸êµ¬í˜„)
- [ ] ìë™ ìš”ì•½ íŠ¸ë¦¬ê±° (ì»¨í…ìŠ¤íŠ¸ 80% ì‚¬ìš© ì‹œ) â€” `chat.py`ì— `manage_context` ë¯¸í†µí•©
- [ ] ìŠ¬ë¼ì´ë”© ìœˆë„ìš° ì „ëµ (ìµœê·¼ 15-18í„´ ìœ ì§€, ì´ì „ í„´ ìš”ì•½) â€” ë¯¸í†µí•©
- [x] ìš”ì•½ ìºì‹±: Redis/DB/Memory âœ…
- [x] `chat.py`ì— í†µí•©: `get_summary(session_id, db)` â†’ `format_persona_for_actor(..., summary=summary)` âœ…
- [x] `evaluation.py`ì—ì„œ `summarize_dialogue` â†’ `save_summary` (ëŒ€í™” ì¢…ë£Œ ì‹œ) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸŸ¡ (í•µì‹¬ ì™„ë£Œ, ê³ ê¸‰ì€ ì„ íƒ)  
**ë¯¸êµ¬í˜„**: ìŠ¬ë¼ì´ë”© ìœˆë„ìš°, 80% íŠ¸ë¦¬ê±°, `manage_context` in chat  
**ì°¸ê³  ë¬¸ì„œ**: `docs/PHASE5_SETUP.md`, `docs/êµ¬í˜„_ìƒíƒœ_ìš”ì•½_2026-01-26.md` Â§9.2

---

### 1.2 ì¤‘ìš” ë¯¸êµ¬í˜„ (Phase 5.1)

#### âœ… TTS API

**íŒŒì¼**: `server-b/backend/app/api/tts.py`

**í˜„ì¬ ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] `app/api/tts.py` íŒŒì¼ ìƒì„± âœ…
- [x] `POST /api/tts` - í…ìŠ¤íŠ¸-ìŒì„± ë³€í™˜ êµ¬í˜„ âœ…
- [x] `GET /api/tts/voices` - ìŒì„± ëª©ë¡ ì¡°íšŒ êµ¬í˜„ âœ…
- [x] Server A GPT-SoVITS ì—°ë™ âœ…
- [x] `main.py`ì— TTS ë¼ìš°í„° ë“±ë¡ âœ…
- [x] ìºì‹± ì‹œìŠ¤í…œ êµ¬í˜„ (ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë°˜) âœ…
- [x] ì˜¤ë””ì˜¤ íŒŒì¼ ë©”íƒ€ë°ì´í„° ë¶„ì„ (mutagen) âœ…
- [x] ì‚¬ìš©ìë³„ íŒŒì¼ ì €ì¥ âœ…
- [x] ë°”ì´ë„ˆë¦¬ ì§ì ‘ ë°˜í™˜ ì˜µì…˜ (`return_binary`) âœ…
- [x] streaming_mode ì§€ì› (0-3) âœ…
- [x] voice_id ë§¤í•‘ ì‹œìŠ¤í…œ (`app/config/voices.json`) âœ…
- [x] ì¸ì¦ ì œê±° (`/api/tts`, `/api/tts/voices`) âœ… (2026-01-26)

**ìš°ì„ ìˆœìœ„**: ğŸŸ¡ ì¤‘ê°„  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)  
**ì°¸ê³  ë¬¸ì„œ**: `docs/GPT-SoVITS WebAPI(api_v2.py).md`  
**ìƒì„¸ êµ¬í˜„ ë‚´ì—­**: `docs/êµ¬í˜„_ìƒíƒœ_ìš”ì•½_2026-01-26.md` ì°¸ì¡°

---

#### âœ… ì±„íŒ… API ì‹¤ì œ ì—°ë™

**íŒŒì¼**: `server-b/backend/app/api/chat.py` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… ì‹¤ì œ API í˜¸ì¶œ êµ¬í˜„ ì™„ë£Œ, ì¸ì¦ ì œê±° ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] ëª¨ë¸ ì´ë¦„ í†µì¼: `gpt-oss-20b` â†’ `gemma-3-27b-it` (ê¸°ë³¸ê°’) âœ…
- [x] í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©: `OLLAMA_BASE_URL` (ê¸°ë³¸), `VLLM_BASE_URL` (ì£¼ì„ ì²˜ë¦¬ë¨) âœ…
- [x] Mock ì‘ë‹µ ì œê±° âœ…
- [x] ì‹¤ì œ API í˜¸ì¶œë¡œ ë³€ê²½ âœ…
- [x] vLLM/Ollama API í˜•ì‹ì— ë§ê²Œ ìš”ì²­/ì‘ë‹µ ë³€í™˜ âœ…
- [x] `session_id` í•„ë“œ ì¶”ê°€ (ì„ íƒ, ìë™ ìƒì„±) âœ…
- [x] ì—ëŸ¬ ì²˜ë¦¬ ê°•í™” (HTTPStatusError, TimeoutException, ConnectError ë“±) âœ…
- [x] `persona`ë¥¼ system ë©”ì‹œì§€ë¡œ ë³€í™˜ âœ…
- [x] LLM_SERVICE í™˜ê²½ ë³€ìˆ˜ì— ë”°ë¥¸ ë¶„ê¸° ì²˜ë¦¬ âœ…
- [x] ì¸ì¦ ì œê±° (`/api/chat`) âœ… (2026-01-26). **ì°¸ê³ **: `GET /api/chat/models` ë¼ìš°íŠ¸ëŠ” Backendì— ì—†ìŒ (ë¯¸êµ¬í˜„).
- [x] í”„ë¡ íŠ¸ì—”ë“œì—ì„œ persona, scenario, session_id, character_id ì „ë‹¬ í™•ì¸ âœ… (2026-01-26)

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³  ë¬¸ì„œ**: 
- `docs/PROJECT_API_SUMMARY.md`
- `docs/LLM_SERVICE_COMPARISON.md`

---

#### âœ… API ê²½ë¡œ í†µì¼

**íŒŒì¼**: `madcamp-Screening-Humanity-FRONT/lib/api/client.ts` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… Backend `/api`ì™€ Frontend `/api` í†µì¼ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Frontend ê²½ë¡œë¥¼ `/api`ë¡œ ë³€ê²½ âœ…
- [x] `lib/api/client.ts`ì—ì„œ `API_V1 = "${API_BASE_URL}/api/v1"` â†’ `API_V1 = "${API_BASE_URL}/api"`ë¡œ ë³€ê²½ âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 0.5ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ

---

## 2. Frontend ë¯¸êµ¬í˜„ í•­ëª©

### 2.1 ì¤‘ìš” ë¯¸êµ¬í˜„ (Phase 5.4)

#### âœ… í„´ ì œí•œ ì„¤ì •í™” ë° ì„¸ì…˜ ê´€ë¦¬

**íŒŒì¼**: `madcamp-Screening-Humanity-FRONT/components/chat-room.tsx` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… í„´ ì œí•œ ì„¤ì •í™” ì™„ë£Œ, ì„¸ì…˜ ê´€ë¦¬ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] `maxTurns` í•˜ë“œì½”ë”© ì œê±°, í™˜ê²½ ë³€ìˆ˜ ì§€ì› ì¶”ê°€ âœ…
- [x] í„´ ìˆ˜ í‘œì‹œ ìœ ì§€ (ì„¤ì • ê°€ëŠ¥í•œ ê°’ í‘œì‹œ) âœ…
- [x] ì„¸ì…˜ ID ìƒì„±/ìœ ì§€ ë¡œì§ ì¶”ê°€ (`crypto.randomUUID()`) âœ…
- [x] Zustand storeì— sessionId ì €ì¥ âœ…
- [x] API í˜¸ì¶œ ì‹œ `session_id` í¬í•¨ âœ…
- [x] í„´ ì œí•œ ì„¤ì •í™” (í™˜ê²½ ë³€ìˆ˜ `NEXT_PUBLIC_MAX_TURNS` ì§€ì›, ê¸°ë³¸ê°’: 30) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸŸ¡ ì¤‘ê°„  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)  
**ì°¸ê³  ë¬¸ì„œ**: `docs/PHASE5_SETUP.md`ì˜ "Phase 5.4: Frontend í„´ ì œí•œ ì„¤ì •í™”" ì„¹ì…˜

---

#### âœ… ì‹¤ì œ API ì—°ë™

**íŒŒì¼**: `madcamp-Screening-Humanity-FRONT/components/chat-room.tsx` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… ì‹¤ì œ API í˜¸ì¶œ êµ¬í˜„ ì™„ë£Œ, í•˜ë“œì½”ë”©ëœ ì‘ë‹µ ì œê±° ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] `chatApi.chat()` ì§ì ‘ í˜¸ì¶œ âœ…
- [x] í•˜ë“œì½”ë”©ëœ ì‘ë‹µ ì œê±° (`aiResponses` ë°°ì—´ ì™„ì „ ì œê±°) âœ…
- [x] ì‹¤ì œ API í˜¸ì¶œë¡œ ë³€ê²½ âœ…
- [x] ì—ëŸ¬ ì²˜ë¦¬ ì¶”ê°€ (Toast, retryWithBackoff) âœ…
- [x] ë¡œë”© ìƒíƒœ í‘œì‹œ (`isAiTyping` ì‚¬ìš©) âœ…
- [x] ì´ˆê¸° ë©”ì‹œì§€(ì²« ëŒ€ì‚¬): ì²« ëŒ€ì‚¬ AI ìƒì„±, sample_dialogue ë¯¸ì‚¬ìš© âœ…
- [x] scenario ì •ë³´ í¬í•¨ âœ…
- [x] TTS ì„¤ì • í¬í•¨ âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)

---

#### âœ… API ê²½ë¡œ í†µì¼

**íŒŒì¼**: `madcamp-Screening-Humanity-FRONT/lib/api/client.ts` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… `/api` ì‚¬ìš© (Backendì™€ ë™ì¼)

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Frontend ê²½ë¡œë¥¼ `/api`ë¡œ ë³€ê²½ âœ…
- [x] `lib/api/client.ts`ì—ì„œ `API_V1 = "${API_BASE_URL}/api/v1"` â†’ `API_V1 = "${API_BASE_URL}/api"`ë¡œ ë³€ê²½ âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 0.5ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ

---

#### âœ… ChatRoom TTS í†µí•©

**íŒŒì¼**: 
- `madcamp-Screening-Humanity-FRONT/components/chat-room.tsx` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/components/tts-settings-modal.tsx` (ì‹ ê·œ ìƒì„±)

**í˜„ì¬ ìƒíƒœ**: âœ… ì™„ì „ êµ¬í˜„ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] TTS ì„¤ì • ëª¨ë‹¬ êµ¬í˜„ (`TtsSettingsModal` ì»´í¬ë„ŒíŠ¸) âœ…
- [x] TTS í˜¸ì¶œ ë°©ì‹ ì„ íƒ (realtime/delayed/on_click) âœ…
- [x] streaming_mode ì„ íƒ (0-3) âœ…
- [x] ì§€ì—° ì‹œê°„ ì„¤ì • (ìŠ¬ë¼ì´ë”) âœ…
- [x] TTS í™œì„±í™”/ë¹„í™œì„±í™” í† ê¸€ âœ…
- [x] ChatRoom í—¤ë”ì— TTS ì„¤ì • ë²„íŠ¼ ì¶”ê°€ âœ…
- [x] ì˜¤ë””ì˜¤ ì¬ìƒ êµ¬í˜„ (3ê°€ì§€ ëª¨ë“œ) âœ…
- [x] ë©”ì‹œì§€ì— ì˜¤ë””ì˜¤ ì•„ì´ì½˜ í‘œì‹œ âœ…
- [x] ë©”ì‹œì§€ í´ë¦­ ì‹œ ì˜¤ë””ì˜¤ ì¬ìƒ (on_click ëª¨ë“œ) âœ…
- [x] Zustand Storeì— TTS ì„¤ì • ì¶”ê°€ âœ…
- [x] ë°±ì—”ë“œ ì‘ë‹µì˜ `audio_url` ì²˜ë¦¬ âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)  
**ì°¸ê³  ë¬¸ì„œ**: `.cursor/plans/chatroom_api_ì—°ë™_ë°_tts_í†µí•©_79dbbc3b.plan.md`

---

#### âœ… í˜ë¥´ì†Œë‚˜ ì „ë‹¬ ë°©ì‹ ê°œì„ 

**íŒŒì¼**: 
- `madcamp-Screening-Humanity-BACK/server-b/backend/app/api/chat.py` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/components/chat-room.tsx` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… ì™„ì „ êµ¬í˜„ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Backend `format_persona_for_actor()` í•¨ìˆ˜ êµ¬í˜„ (ì œ4ì˜ ë²½, director_note, summary) âœ…
- [x] ChatRequestì— scenario, director_note, current_speaker í•„ë“œ ì¶”ê°€ âœ…
- [x] chat ì—”ë“œí¬ì¸íŠ¸ì—ì„œ format_persona_for_actor() ì‚¬ìš© âœ…
- [x] Frontend ChatRequest íƒ€ì…ì— scenario, director_note ì¶”ê°€ âœ…
- [x] ChatRoomì—ì„œ scenario ì •ë³´ í¬í•¨ (ëª¨ë“  chatApi.chat() í˜¸ì¶œ) âœ…
- [x] Backend ë¡œê¹… ì¶”ê°€ (ê°œë°œ í™˜ê²½, DEBUG í™˜ê²½ ë³€ìˆ˜ ê¸°ë°˜) âœ…
- [x] Frontend ë¡œê¹… ì¶”ê°€ (ê°œë°œ í™˜ê²½, NODE_ENV ê¸°ë°˜) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)  
**ì°¸ê³  ë¬¸ì„œ**: `.cursor/plans/í˜ë¥´ì†Œë‚˜_ì „ë‹¬_ë°©ì‹_ê°œì„ _ë°_ëŒ€í™”_ì»¨í…ìŠ¤íŠ¸_ê´€ë¦¬_d7205e41.plan.md`

---

#### âœ… ê°ë… ëª¨ë“œ (Director Mode)

**íŒŒì¼**: 
- `madcamp-Screening-Humanity-BACK/server-b/backend/app/api/chat.py`
- `madcamp-Screening-Humanity-FRONT/components/chat-room.tsx`, `character-select-modal.tsx`, `scenario-setup.tsx`, `script-preview.tsx`, `mode-select-modal.tsx`
- `madcamp-Screening-Humanity-FRONT/lib/store.ts`, `lib/api/types.ts`, `lib/api/client.ts`

**í˜„ì¬ ìƒíƒœ**: âœ… **ì™„ì „ êµ¬í˜„ ì™„ë£Œ** (2026-01-27)

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Backend: `director_note`, `current_speaker`, ê°ë… ëª¨ë“œ ê°ì§€ (`[ë°°ìš° 1:`, `[ë°°ìš° 2:]`) âœ…
- [x] Backend: `format_persona_for_actor()`ì— ì œ4ì˜ ë²½, director_note ë°˜ì˜ âœ…
- [x] Frontend: GameMode `"director"`, `secondCharacter` (store) âœ…
- [x] Frontend: ê°ë… ëª¨ë“œ 2ì¸ ìºë¦­í„° ì„ íƒ, ì´ˆê¸° ëŒ€í™”, ìë™ ëŒ€í™” ì´ì–´ê°€ê¸° âœ…
- [x] Frontend: ê°ë… ì¤‘ì¬ ì…ë ¥ (`[ê°ë… ì¤‘ì¬]`), í„´ ì¹´ìš´íŠ¸ (1í„´=2ë©”ì‹œì§€) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸŸ¡  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³  ë¬¸ì„œ**: `madcamp-Screening-Humanity-FRONT/docs/ê°ë…_ì¤‘ì¬_ê¸°ëŠ¥_êµ¬í˜„.md`, `ê°ë…_ëª¨ë“œ_í„´_ì¹´ìš´íŠ¸_ìˆ˜ì •.md`

---

#### âœ… ì„œë²„ ì—ëŸ¬ í•´ê²° ë° ë°±ì—”ë“œ Gemini SDK ë„ì…

**íŒŒì¼**: 
- `madcamp-Screening-Humanity-FRONT/app/api/characters/route.ts` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-BACK/server-b/backend/app/api/ai.py` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-BACK/server-b/backend/requirements.txt` (ìˆ˜ì • ì™„ë£Œ)

**í˜„ì¬ ìƒíƒœ**: âœ… ì™„ì „ êµ¬í˜„ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] í”„ë¡ íŠ¸ì—”ë“œ 500 ì—ëŸ¬ í•´ê²°: `/api/characters` API ë¹„ë™ê¸° ì²˜ë¦¬ ê°œì„  âœ…
  - ë™ê¸°ì‹ íŒŒì¼ ì²˜ë¦¬(`fs.readFileSync`) â†’ ë¹„ë™ê¸°ì‹(`fs.promises`) ì „í™˜ âœ…
  - `Promise.all()`ì„ ì‚¬ìš©í•œ ë³‘ë ¬ íŒŒì¼ ë¡œë“œ âœ…
  - ì˜ˆì™¸ ì²˜ë¦¬ ê°•í™” (ê° íŒŒì¼ë³„ try-catch) âœ…
  - ë””ë ‰í† ë¦¬ ì¡´ì¬ í™•ì¸ (`fs.promises.access`) âœ…
  - íŒŒì¼ íƒ€ì… í™•ì¸ (`stats.isFile()`) âœ…
- [x] ë°±ì—”ë“œ Gemini SDK ë„ì…: `google-generativeai` íŒ¨í‚¤ì§€ ì¶”ê°€ âœ…
  - `requirements.txt`ì— íŒ¨í‚¤ì§€ ì¶”ê°€ âœ…
  - ë¹„ë™ê¸° API í˜¸ì¶œ (`generate_content_async`) âœ…
  - JSON Mode ì§€ì› (`response_mime_type="application/json"`) âœ…
  - System Instruction ì§€ì› âœ…
- [x] ë°±ì—”ë“œ SDK ê³ ë„í™”: Safety Settings ì ìš© âœ…
  - ê¸°ë³¸ê°’: `BLOCK_NONE` (ë¬´ê²€ì—´) âœ…
  - í™˜ê²½ë³€ìˆ˜ë¡œ ì¡°ì ˆ ê°€ëŠ¥ (`GOOGLE_SAFETY_THRESHOLD`) âœ…
- [x] í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì • âœ…
  - `GOOGLE_API_KEY`: Gemini API í‚¤ (í•„ìˆ˜) âœ…
  - `GOOGLE_API_MODEL`: ì‚¬ìš©í•  ëª¨ë¸ (ê¸°ë³¸ê°’: `gemini-1.5-flash`) âœ…
  - `GOOGLE_SAFETY_THRESHOLD`: ì•ˆì „ ì„¤ì • (ê¸°ë³¸ê°’: `BLOCK_NONE`) âœ…
  - í´ë°±: `NEXT_PUBLIC_GEMINI_API_KEY` (ê°œë°œ í™˜ê²½ í¸ì˜) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)  
**ì°¸ê³  ë¬¸ì„œ**: 
- [Gemini API ì‚¬ìš©í•´ë³´ê¸°](https://velog.io/@dyd1308/Gemini-api-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0)
- [Gemini ëª¨ë¸ ë²„ì „](https://ai.google.dev/gemini-api/docs/models?hl=ko#model-versions)

---

#### âœ… ìºë¦­í„° ì‹œìŠ¤í…œ ê³ ë„í™”

**íŒŒì¼**: 
- `madcamp-Screening-Humanity-FRONT/app/api/characters/route.ts` (ì‹ ê·œ ìƒì„±)
- `madcamp-Screening-Humanity-FRONT/lib/api/gemini.ts` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/lib/utils/persona-builder.ts` (ì‹ ê·œ ìƒì„±)
- `madcamp-Screening-Humanity-FRONT/components/character-creation-wizard.tsx` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/components/chat-room.tsx` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/public/characters/*.json` (9ì¢… ìºë¦­í„° ë§ˆì´ê·¸ë ˆì´ì…˜)

**í˜„ì¬ ìƒíƒœ**: âœ… ì™„ì „ êµ¬í˜„ ì™„ë£Œ

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] ë°ì´í„° êµ¬ì¡° ì„¸ë¶„í™” (persona â†’ 10ê°œ ì´ìƒì˜ ìƒì„¸ í•„ë“œ) âœ…
- [x] íŒŒì¼ ê¸°ë°˜ ê´€ë¦¬ ì‹œìŠ¤í…œ (public/characters/*.json API Route) âœ…
- [x] AI ìë™ ì™„ì„± ê¸°ëŠ¥ ê³ ë„í™” (generateCharacterSpec) âœ…
- [x] í”„ë¡ íŠ¸ì—”ë“œ UI/UX í˜ì‹  (CharacterCreationWizard ê°œí¸) âœ…
  - [x] Step 1 ê°„ì†Œí™” (ì´ë¦„, ì¹´í…Œê³ ë¦¬, ì‘í’ˆëª… 3ê°€ì§€ë§Œ ì…ë ¥) âœ…
  - [x] 'ë‹¤ìŒ' ë²„íŠ¼ í´ë¦­ ì‹œ AI ìë™ ìƒì„± âœ…
  - [x] Step 2 í†µí•© í¸ì§‘ (ëª¨ë“  ì •ë³´ í•œ í™”ë©´ì—ì„œ ìˆ˜ì •) âœ…
  - [x] AI ì¬ìƒì„± íšŸìˆ˜ ì œí•œ (ì´ 3íšŒ) âœ…
  - [x] ì‘í’ˆëª… í•„ë“œ ì¶”ê°€ (source_work) âœ…
- [x] ì‹œìŠ¤í…œ ìµœì í™” (í˜ë¥´ì†Œë‚˜ ë¹Œë” ì‹œìŠ¤í…œ) âœ…
- [x] 9ì¢… ìºë¦­í„° ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ âœ…
  - [x] worldview í•„ë“œ ì¶”ê°€ (9ì¢… ìºë¦­í„° ëª¨ë‘) âœ…
- [x] ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡œì§ (persona í•„ë“œ ì œê±°) âœ…
- [x] ëŸ°íƒ€ì„ í˜ë¥´ì†Œë‚˜ ë¹Œë“œ ì‹œìŠ¤í…œ (buildSystemPersona) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ  
**ì˜ˆìƒ ê¸°ê°„**: 3-5ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ (2026-01-26)  
**ì°¸ê³  ë¬¸ì„œ**: `docs/êµ¬í˜„_ìƒíƒœ_ìš”ì•½_2026-01-26.md`ì˜ "5. ìºë¦­í„° ì‹œìŠ¤í…œ ê³ ë„í™” ì‘ì—… ì™„ë£Œ ë‚´ì—­" ì„¹ì…˜

---

## 3. Server A ì—°ë™ ë¯¸êµ¬í˜„ í•­ëª©

### 3.1 í•„ìˆ˜ ë¯¸êµ¬í˜„

#### âœ… vLLM ì„œë²„ ì‹¤í–‰

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰
- [x] ëª¨ë¸ íŒŒì¼ í™•ì¸ (`/mnt/shared_models/llm/gemma-3-27b-it/`)
- [x] í—¬ìŠ¤ ì²´í¬ í™•ì¸ (`GET /health` ë˜ëŠ” `GET /v1/models`)
- [x] OpenAI í˜¸í™˜ API í…ŒìŠ¤íŠ¸

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 0.5ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³  ë¬¸ì„œ**: `docs/PHASE5_SETUP.md`ì˜ "Server A: vLLM ì„œë¹„ìŠ¤ ì„¤ì •" ì„¹ì…˜

---

#### âœ… GPT-SoVITS WebAPI êµ¬ë™

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Conda í™˜ê²½ í™œì„±í™” (`conda activate GPTSoVits`)
- [x] `api_v2.py` ì‹¤í–‰ (í¬íŠ¸ 9880)
- [x] systemd ì„œë¹„ìŠ¤ ë“±ë¡ (ì„ íƒ, ìë™ ì‹œì‘)
- [x] í—¬ìŠ¤ ì²´í¬ í™•ì¸
- [x] TTS API í…ŒìŠ¤íŠ¸

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 0.5ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³  ë¬¸ì„œ**: `docs/PHASE5_SETUP.md`ì˜ "Server A: TTS ì„œë¹„ìŠ¤ ì„¤ì •" ì„¹ì…˜

---

#### âœ… Server A NPM ì„¤ì •

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Nginx Proxy Manager Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰
- [x] vLLM í”„ë¡ì‹œ í˜¸ìŠ¤íŠ¸ ì„¤ì •
  - Domain: `llm.server-a.local` (ë˜ëŠ” ì‹¤ì œ ë„ë©”ì¸)
  - Forward: `172.17.0.1:8000` (ì»¨í…Œì´ë„ˆ ë‚´ë¶€ í¬íŠ¸)
- [x] GPT-SoVITS í”„ë¡ì‹œ í˜¸ìŠ¤íŠ¸ ì„¤ì •
  - Domain: `tts.server-a.local` (ë˜ëŠ” ì‹¤ì œ ë„ë©”ì¸)
  - Forward: `172.17.0.1:9872` (TTS API í¬íŠ¸)
- [x] SSL ì¸ì¦ì„œ ì„¤ì • (Let's Encrypt ë˜ëŠ” ìì²´ ì„œëª…)

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³  ë¬¸ì„œ**: `docs/PHASE5_SETUP.md`ì˜ "Server A: Nginx Proxy Manager ì„¤ì •" ì„¹ì…˜

---

#### âœ… Backend í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

**íŒŒì¼**: `server-b/backend/.env` (ìƒì„± ì™„ë£Œ)

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] `LLM_SERVICE` í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ê¸°ë³¸ê°’: `ollama`) âœ…
- [x] `OLLAMA_BASE_URL` ì„¤ì • (ê¸°ë³¸ LLM ì„œë¹„ìŠ¤) âœ…
- [x] `TTS_BASE_URL` ì„¤ì • âœ…
- [x] `VLLM_BASE_URL` ì„¤ì • (ì£¼ì„ ì²˜ë¦¬ëœ ì½”ë“œì—ì„œ ì‚¬ìš©, í•„ìš” ì‹œ ì£¼ì„ í•´ì œ) âœ…
- [x] `FRONTEND_URL` í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ (OAuth ì½œë°± ë¦¬ë‹¤ì´ë ‰íŠ¸ìš©) âœ…
- [x] `config.py`ì— í™˜ê²½ ë³€ìˆ˜ í•„ë“œ ì¶”ê°€ âœ…
- [x] `.env.example` ì—…ë°ì´íŠ¸ âœ…
- [x] `GPU_SERVER_URL` í™˜ê²½ ë³€ìˆ˜ ì œê±° (ì‚¬ìš©ë˜ì§€ ì•ŠìŒ) âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (Phase 5.1 ì™„ë£Œë¥¼ ìœ„í•´ í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 0.5ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³ **: 
- Ollamaë¥¼ ê¸°ë³¸ LLM ì„œë¹„ìŠ¤ë¡œ ì‚¬ìš© (LLM_SERVICE=ollama)
- vLLM ì½”ë“œëŠ” ì£¼ì„ ì²˜ë¦¬ë˜ì–´ ìˆìœ¼ë©°, í•„ìš” ì‹œ ì£¼ì„ í•´ì œí•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥

---

#### âœ… ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œìŠ¤í…œ í†µí•©

**íŒŒì¼**: 
- `server-b/backend/app/api/auth.py` (ìˆ˜ì • ì™„ë£Œ)
- `server-b/backend/app/api/deps.py` (ìˆ˜ì • ì™„ë£Œ)
- `server-b/backend/app/core/config.py` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/app/auth/callback/page.tsx` (ì‹ ê·œ ìƒì„±)
- `madcamp-Screening-Humanity-FRONT/components/landing-page.tsx` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/components/auth-components.tsx` (ìˆ˜ì • ì™„ë£Œ)
- `madcamp-Screening-Humanity-FRONT/lib/api/client.ts` (ìˆ˜ì • ì™„ë£Œ)

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [x] Backend: JWTë¥¼ HttpOnly Cookieë¡œ ì„¤ì • âœ…
- [x] Backend: ì¿ í‚¤ ê¸°ë°˜ JWT ê²€ì¦ ì§€ì› (ì¿ í‚¤ ë° Authorization í—¤ë”) âœ…
- [x] Backend: ë¡œê·¸ì•„ì›ƒ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ (`POST /api/auth/logout`) âœ…
- [x] Backend: ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ (`GET /api/auth/me`) âœ…
- [x] Backend: Frontend URL í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€ (`FRONTEND_URL`) âœ…
- [x] Frontend: NextAuth.js ì™„ì „ ì œê±° âœ…
- [x] Frontend: ì¸ì¦ ì½œë°± ë¼ìš°íŠ¸ ìƒì„± (`/auth/callback`) âœ…
- [x] Frontend: API í´ë¼ì´ì–¸íŠ¸ì— `credentials: 'include'` ì¶”ê°€ âœ…
- [x] Frontend: ë¡œê·¸ì¸ í”Œë¡œìš° ìˆ˜ì • (Backend OAuthë¡œ ì§ì ‘ ì´ë™) âœ…
- [x] Frontend: ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ êµ¬í˜„ âœ…
- [x] Frontend: ëœë”© í˜ì´ì§€ì— ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì¶”ê°€ âœ…
- [x] Frontend: ëœë”© í˜ì´ì§€ì— ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ âœ…

**ìš°ì„ ìˆœìœ„**: ğŸ”´ ë†’ìŒ (ì¸ì¦ ì‹œìŠ¤í…œ í†µí•© í•„ìˆ˜)  
**ì˜ˆìƒ ê¸°ê°„**: 1ì¼  
**ìƒíƒœ**: âœ… êµ¬í˜„ ì™„ë£Œ  
**ì°¸ê³ **: 
- Backend JWT ê¸°ë°˜ ì¸ì¦ìœ¼ë¡œ í†µì¼
- HttpOnly Cookie ì‚¬ìš©ìœ¼ë¡œ XSS ê³µê²© ë°©ì–´
- ë¡œê·¸ì¸ í›„ `/auth/callback`ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸, ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ í›„ ëœë”© í˜ì´ì§€ë¡œ ì´ë™
- ë¡œê·¸ì•„ì›ƒ í›„ ëœë”© í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- ëœë”© í˜ì´ì§€ ìš°ì¸¡ ìƒë‹¨ì— ì‚¬ìš©ì ì´ë¦„ê³¼ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í‘œì‹œ

---

## 4. ìš°ì„ ìˆœìœ„ë³„ ì •ë¦¬

### 4.1 ì¦‰ì‹œ ì§„í–‰ (Phase 5.1 ì™„ë£Œ)

**ëª©í‘œ**: ê¸°ë³¸ ì±„íŒ… ê¸°ëŠ¥ ì™„ì„±

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | íŒŒì¼/ìœ„ì¹˜ | ì˜ˆìƒ ê¸°ê°„ | ìƒíƒœ |
|---------|------|----------|----------|------|
| ğŸ”´ ë†’ìŒ | Server A - vLLM ì„œë²„ ì‹¤í–‰ | Server A | 0.5ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Server A - GPT-SoVITS WebAPI êµ¬ë™ | Server A | 0.5ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Server A - NPM ì„¤ì • | Server A | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Backend - í™˜ê²½ ë³€ìˆ˜ ì„¤ì • | `.env` | 0.5ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Backend - Mock ì‘ë‹µ ì œê±° | `chat.py` | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Backend - API ê²½ë¡œ í†µì¼ | `main.py` | 0.5ì¼ | âœ… í™•ì¸ ì™„ë£Œ (ì´ë¯¸ `/api` ì‚¬ìš© ì¤‘) |
| ğŸ”´ ë†’ìŒ | Backend - TTS API êµ¬í˜„ | `tts.py` (ì‹ ê·œ) | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Frontend - ì‹¤ì œ API ì—°ë™ | `chat-room.tsx` | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Frontend - API ê²½ë¡œ í†µì¼ | `client.ts` | 0.5ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Frontend - ChatRoom TTS í†µí•© | `chat-room.tsx`, `tts-settings-modal.tsx` | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |
| ğŸ”´ ë†’ìŒ | Backend - í˜ë¥´ì†Œë‚˜ ì „ë‹¬ ë°©ì‹ ê°œì„  | `chat.py` | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |

**ì´ ì˜ˆìƒ ê¸°ê°„**: 3-5ì¼

---

### 4.2 Phase 5.1 ì™„ë£Œ í›„ ì¦‰ì‹œ (í•„ìˆ˜)

**ëª©í‘œ**: ë¬´ì œí•œ ëŒ€í™” ì§€ì›

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | íŒŒì¼/ìœ„ì¹˜ | ì˜ˆìƒ ê¸°ê°„ | ìƒíƒœ |
|---------|------|----------|----------|------|
| ğŸŸ¡ ì¤‘ê°„ | Phase 5.2: ì»¨í…ìŠ¤íŠ¸ ì ˆì•½ ìš”ì•½ | `context_manager.py` | - | âœ… ë¶€ë¶„ ì™„ë£Œ (ê³ ê¸‰: ìŠ¬ë¼ì´ë”©/80% ë¯¸êµ¬í˜„) |
| ğŸŸ¡ ì¤‘ê°„ | Phase 5.4: Frontend í„´ ì œí•œ ì„¤ì •í™” | `chat-room.tsx` | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ |

**ì´ ì˜ˆìƒ ê¸°ê°„**: 4-6ì¼

---

### 4.3 ê¸°íƒ€ ë¯¸êµ¬í˜„

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | íŒŒì¼/ìœ„ì¹˜ | ì˜ˆìƒ ê¸°ê°„ | ìƒíƒœ |
|---------|------|----------|----------|------|
| ğŸŸ¡ ì¤‘ê°„ | TTS ìŒì„± ëª©ë¡ ì¡°íšŒ UI | Frontend (ì‹ ê·œ) | 1ì¼ | âœ… êµ¬í˜„ ì™„ë£Œ (ìºë¦­í„° ìƒì„± ìœ„ì €ë“œì— í†µí•©) |
| ğŸŸ¡ ì¤‘ê°„ | 3D ìƒì„± Server A ì—°ë™ | `generate.py` | 1ì¼ | âš ï¸ ë¶€ë¶„ êµ¬í˜„ |

**Backend ë¯¸êµ¬í˜„ API** (Frontend `lib/api/client.ts`ì—ë§Œ ì •ì˜):
- `GET /api/chat/models` â€” Backend `chat.py`ì— ë¼ìš°íŠ¸ ì—†ìŒ. `chatApi.listModels()` í˜¸ì¶œ ì‹œ 404.
- `POST /api/style/transform`, `GET /api/style/status/{id}` â€” Backend ë¼ìš°íŠ¸ ì—†ìŒ. `styleApi`ë§Œ clientì— ì •ì˜.
- `GET /api/animations` â€” Backend ë¼ìš°íŠ¸ ì—†ìŒ. `animationApi`ë§Œ clientì— ì •ì˜.
- `POST /api/characters/generate` â€” Backendì— í•´ë‹¹ ê²½ë¡œ ì—†ìŒ. `characterApi.generateCharacterDetails()`ê°€ í˜¸ì¶œ. **ê²½ë¡œ ë¶ˆì¼ì¹˜**: ì‹¤ì œ ì—°ë™ ì‹œ `POST /api/ai/generate/character-details`(êµ¬í˜„ë¨, ì¸ì¦ í•„ìš”)ë¡œ client ìˆ˜ì • í•„ìš”.
- **Frontend `client.chat()` body**: `director_note`, `current_speaker`, `tts_enabled`, `tts_mode`, `tts_delay_ms`, `tts_streaming_mode` ë¯¸í¬í•¨ (Backend `ChatRequest`Â·chat-room ì¸ìì™€ ë¶ˆì¼ì¹˜).

---

## 5. êµ¬í˜„ ìˆœì„œ ê¶Œì¥

### 5.1 Phase 5.1 ì™„ë£Œ (1ì£¼ì°¨)

**Day 1-2: Server A ì„¤ì •** âœ… **ì™„ë£Œ**
1. âœ… vLLM ì„œë²„ ì‹¤í–‰
2. âœ… GPT-SoVITS WebAPI êµ¬ë™
3. âœ… Server A NPM ì„¤ì •

**Day 3: Backend ìˆ˜ì •**
1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • âœ…
2. Mock ì‘ë‹µ ì œê±° âœ…
3. ì‹¤ì œ API í˜¸ì¶œ êµ¬í˜„ âœ…
4. ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œìŠ¤í…œ í†µí•© âœ…
5. TTS API êµ¬í˜„
6. API ê²½ë¡œ í†µì¼ âœ…

**Day 4: Frontend ìˆ˜ì •**
1. ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œìŠ¤í…œ í†µí•© âœ…
2. ì‹¤ì œ API ì—°ë™
3. API ê²½ë¡œ í†µì¼ âœ…
4. í•˜ë“œì½”ë”©ëœ ì‘ë‹µ ì œê±°

**Day 5: í†µí•© í…ŒìŠ¤íŠ¸**
1. ì—”ë“œíˆ¬ì—”ë“œ í…ŒìŠ¤íŠ¸
2. ì—ëŸ¬ í•¸ë“¤ë§ í…ŒìŠ¤íŠ¸

### 5.2 Phase 5.2-5.4 (2ì£¼ì°¨)

**Day 6-8: Phase 5.2 (ì»¨í…ìŠ¤íŠ¸ ì ˆì•½)**
1. Redis ì„¤ì¹˜
2. ContextManager êµ¬í˜„
3. ìë™ ìš”ì•½ ë¡œì§ êµ¬í˜„

**Day 9: Phase 5.4 (Frontend í„´ ì œí•œ ì œê±°)**
1. í„´ ì œí•œ ì œê±°
2. ì„¸ì…˜ ê´€ë¦¬ ì¶”ê°€

---

## 6. ì˜ì¡´ì„± ì„¤ì¹˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 6.1 Backend ì˜ì¡´ì„±

**Redis** (Phase 5.2 ContextManager: ì„ íƒ, ì—†ìœ¼ë©´ DB/ë©”ëª¨ë¦¬ ì‚¬ìš©):
- [ ] Redis ì„œë²„ ì„¤ì¹˜ (`sudo apt install redis-server` ë˜ëŠ” Docker)
- [ ] Redis ì„œë¹„ìŠ¤ ì‹œì‘ (`sudo systemctl start redis-server`)

**Python íŒ¨í‚¤ì§€**:
- [ ] `redis` (`pip install redis`) â€” ContextManagerì—ì„œ ì„ íƒ ì‚¬ìš©
- [ ] `tiktoken` (`pip install tiktoken`) â€” ì„ íƒ (í† í° ê³„ì‚°)

### 6.2 Frontend ì˜ì¡´ì„±

**npm íŒ¨í‚¤ì§€**:
- [ ] `uuid` (`npm install uuid`)
- [ ] `@types/uuid` (`npm install --save-dev @types/uuid`)

---

## 7. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

### 7.1 Backend í™˜ê²½ ë³€ìˆ˜ (`.env`)

**í•„ìˆ˜**:
- [ ] `SERVER_A_NPM_URL` (ì˜ˆ: `https://server-a.local`)
- [ ] `LLM_SERVICE` (`vllm` ë˜ëŠ” `ollama`)
- [ ] `VLLM_BASE_URL` ë˜ëŠ” `OLLAMA_BASE_URL`

**Phase 5.2** (ContextManager, ì„ íƒ):
- [ ] `REDIS_URL` (ì˜ˆ: `redis://localhost:6379`)

**ì œê±°ë¨**:
- ~~`GPU_SERVER_URL`~~ (ì‚¬ìš©ë˜ì§€ ì•Šì•„ ì œê±°ë¨)

---

## 8. íŒŒì¼ ìƒì„± ì²´í¬ë¦¬ìŠ¤íŠ¸

### 8.1 Backend ì‹ ê·œ íŒŒì¼

- [x] `server-b/backend/app/services/` ë””ë ‰í† ë¦¬ ìƒì„± âœ…
- [x] `server-b/backend/app/services/context_manager.py` ìƒì„± âœ…
- [x] `server-b/backend/app/api/tts.py` ìƒì„± âœ…

### 8.2 Backend ìˆ˜ì • íŒŒì¼

- [ ] `server-b/backend/app/api/chat.py` ìˆ˜ì •
- [ ] `server-b/backend/app/main.py` ìˆ˜ì • (TTS ë¼ìš°í„° ë“±ë¡, `/api/v1` ê²½ë¡œ ì¶”ê°€)

### 8.3 Frontend ìˆ˜ì • íŒŒì¼

- [ ] `components/chat-room.tsx` ìˆ˜ì •
- [ ] `lib/api/client.ts` ìˆ˜ì • (ì„ íƒ, API ê²½ë¡œ í†µì¼ ì‹œ)

---

## 9. í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 9.1 Phase 5.1 í…ŒìŠ¤íŠ¸

- [ ] vLLM ì„œë²„ í—¬ìŠ¤ ì²´í¬
- [ ] GPT-SoVITS WebAPI í—¬ìŠ¤ ì²´í¬
- [ ] Backend â†’ Server A vLLM ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] Backend â†’ Server A GPT-SoVITS ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] Frontend â†’ Backend ì±„íŒ… API í…ŒìŠ¤íŠ¸
- [ ] Frontend â†’ Backend TTS API í…ŒìŠ¤íŠ¸
- [ ] ì—”ë“œíˆ¬ì—”ë“œ ì±„íŒ… í…ŒìŠ¤íŠ¸
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ í…ŒìŠ¤íŠ¸

### 9.2 Phase 5.2, 5.4 í…ŒìŠ¤íŠ¸

- [ ] ì»¨í…ìŠ¤íŠ¸ ì ˆì•½ ìš”ì•½ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (30í„´ ì´ìƒ ëŒ€í™”)
- [ ] Frontend ë¬´ì œí•œ ëŒ€í™” í…ŒìŠ¤íŠ¸
- [ ] ì„¸ì…˜ ê´€ë¦¬ í…ŒìŠ¤íŠ¸ (ì„¸ì…˜ ID ìœ ì§€)

---

## 10. ì°¸ê³  ë¬¸ì„œ

### 10.1 êµ¬í˜„ ê°€ì´ë“œ
- `docs/PHASE5_SETUP.md` - Phase 5 ì„¤ì • ë° êµ¬í˜„ ê°€ì´ë“œ
- `docs/í”„ë¡œì íŠ¸_ì •í•©ì„±_í™•ì¸_ë°_ë¯¸êµ¬í˜„_í•­ëª©_ì •ë¦¬.md` - ì •í•©ì„± í™•ì¸ ê²°ê³¼

### 10.2 API ë¬¸ì„œ
- `docs/PROJECT_API_SUMMARY.md` - API ì‚¬ìš© í˜„í™©
- `docs/GPT-SoVITS WebAPI(api_v2.py).md` - GPT-SoVITS API
- `docs/LLM_SERVICE_COMPARISON.md` - vLLM vs Ollama ë¹„êµ

### 10.3 í”„ë¡œì íŠ¸ ëª…ì„¸ì„œ
- `docs/FINALFINAL.md` - ì „ì²´ í”„ë¡œì íŠ¸ í†µí•© ëª…ì„¸ì„œ
- `docs/Backend_í”„ë¡œì íŠ¸_í˜„í™©_ëª…ì„¸ì„œ.md` - Backend ìƒì„¸ ëª…ì„¸
- `docs/Front_PROJECT_SPECIFICATION.md` - Frontend ìƒì„¸ ëª…ì„¸

---

**ë¬¸ì„œ ë²„ì „**: 2.6  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-27  
**ê²€ì¦ ì™„ë£Œ**: ì‹¤ì œ ì½”ë“œë² ì´ìŠ¤ í™•ì¸ ì™„ë£Œ, ê°ë…/Redis/ContextManager ë°˜ì˜

**ë³€ê²½ ì´ë ¥**:
- v2.3 (2026-01-27): ê°ë… ëª¨ë“œ ë° Redis/ContextManager ë°˜ì˜
  - Phase 5.2: âŒ â†’ âœ… ë¶€ë¶„ ì™„ë£Œ (ContextManager, Redis ì„ íƒ, ChatSummary, chat/evaluation ì—°ë™)
  - ê°ë… ëª¨ë“œ: âœ… ì™„ë£Œ í•­ëª© ì¶”ê°€ (Backend/Frontend)
  - í˜ë¥´ì†Œë‚˜: format_persona_for_actor, director_note, current_speaker ë°˜ì˜
- v2.4 (2026-01-27): Phase 5.3(ë™ì‹œ ì ‘ì† ì œí•œ) ê³„íšÂ·ê°€ì´ë“œÂ·ì²´í¬ë¦¬ìŠ¤íŠ¸Â·ì°¸ì¡° ì „ë©´ ì‚­ì œ
- v2.5 (2026-01-27): BACK/FRONT ì½”ë“œ ê²€í†  ë°˜ì˜ â€” GET /api/chat/models, style, animations, /api/characters/generate ë¯¸êµ¬í˜„; client chat body director_note/tts_* ë¯¸ì „ë‹¬; /api/ai ê²½ë¡œ ë¶ˆì¼ì¹˜
- v2.6 (2026-01-27): 4.3ì— Frontend client chat() body director_note/tts_* ë¯¸ì „ë‹¬ í•­ëª© ì¶”ê°€
- v2.2 (2026-01-26): ì„œë²„ ì—ëŸ¬ í•´ê²° ë° ë°±ì—”ë“œ Gemini SDK ë„ì… ë°˜ì˜
  - í”„ë¡ íŠ¸ì—”ë“œ 500 ì—ëŸ¬ í•´ê²°: `/api/characters` API ë¹„ë™ê¸° ì²˜ë¦¬ ê°œì„ 
  - ë°±ì—”ë“œ Gemini SDK ë„ì…: `google-generativeai` íŒ¨í‚¤ì§€ ì¶”ê°€ ë° ì ìš©
  - ë°±ì—”ë“œ SDK ê³ ë„í™”: Safety Settings, JSON Mode ì ìš©
  - í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ ì„¤ì •: GOOGLE_API_KEY, GOOGLE_API_MODEL, GOOGLE_SAFETY_THRESHOLD
- v2.1 (2026-01-26): ìºë¦­í„° ìƒì„± ìœ„ì €ë“œ ê°œí¸ ë°˜ì˜
  - Step 1 ê°„ì†Œí™” (ì´ë¦„, ì¹´í…Œê³ ë¦¬, ì‘í’ˆëª… 3ê°€ì§€ë§Œ ì…ë ¥)
  - 'ë‹¤ìŒ' ë²„íŠ¼ í´ë¦­ ì‹œ AI ìë™ ìƒì„±
  - Step 2 í†µí•© í¸ì§‘ (ëª¨ë“  ì •ë³´ í•œ í™”ë©´ì—ì„œ ìˆ˜ì •)
  - AI ì¬ìƒì„± íšŸìˆ˜ ì œí•œ (ì´ 3íšŒ)
  - ì‘í’ˆëª… í•„ë“œ ì¶”ê°€ (source_work)
  - worldview í•„ë“œ ì¶”ê°€ (9ì¢… ìºë¦­í„° ëª¨ë‘)
- v2.0 (2026-01-26): ìºë¦­í„° ì‹œìŠ¤í…œ ê³ ë„í™” ì‘ì—… ì™„ë£Œ ë°˜ì˜
  - ë°ì´í„° êµ¬ì¡° ì„¸ë¶„í™” (persona â†’ 10ê°œ ì´ìƒì˜ ìƒì„¸ í•„ë“œ)
  - íŒŒì¼ ê¸°ë°˜ ê´€ë¦¬ ì‹œìŠ¤í…œ (public/characters/*.json API Route)
  - AI ìë™ ì™„ì„± ê¸°ëŠ¥ ê³ ë„í™” (generateCharacterSpec)
  - í”„ë¡ íŠ¸ì—”ë“œ UI/UX í˜ì‹  (CharacterCreationWizard ê°œí¸)
  - ì‹œìŠ¤í…œ ìµœì í™” (í˜ë¥´ì†Œë‚˜ ë¹Œë” ì‹œìŠ¤í…œ)
  - 9ì¢… ìºë¦­í„° ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
- v1.9 (2026-01-26): ì¸ì¦ ì œê±° ë° í”„ë¡¬í”„íŠ¸ ì „ë‹¬ ìˆ˜ì • ë°˜ì˜
  - `/api/chat`, `/api/chat/models` ì¸ì¦ ì œê±°
  - `/api/tts`, `/api/tts/voices` ì¸ì¦ ì œê±°
  - `/api/generate` ì¸ì¦ ì œê±° (user_id="anonymous")
  - `/api/characters/*` ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ì¸ì¦ ì œê±°
  - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ persona, scenario, session_id, character_id ì „ë‹¬ í™•ì¸
  - ë°±ì—”ë“œì—ì„œ request.personaë¥¼ system ë©”ì‹œì§€ë¡œ í¬ë§·íŒ… í™•ì¸
- v1.8 (2026-01-26): ëœë”© í˜ì´ì§€ ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ì¶”ê°€ - ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ API ì¶”ê°€ (`GET /api/auth/me`), ëœë”© í˜ì´ì§€ì— ì‚¬ìš©ì ì´ë¦„ ë° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í‘œì‹œ, ì¸ì¦ ì½œë°±ì—ì„œ ì‚¬ìš©ì ì •ë³´ ìë™ ì¡°íšŒ
- v1.7 (2026-01-26): ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œìŠ¤í…œ í†µí•© ì™„ë£Œ - Backend JWT HttpOnly Cookie ì„¤ì •, Frontend NextAuth.js ì œê±°, ì¸ì¦ ì½œë°± ë¼ìš°íŠ¸ êµ¬í˜„, API í´ë¼ì´ì–¸íŠ¸ ì¿ í‚¤ ì „ë‹¬ ì„¤ì •, ë¡œê·¸ì•„ì›ƒ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- v1.6 (2026-01-26): Ollama ê¸°ì¤€ìœ¼ë¡œ API êµ¬í˜„ ë³€ê²½ - vLLM ì½”ë“œ ì£¼ì„ ì²˜ë¦¬, Ollamaë¥¼ ê¸°ë³¸ LLM ì„œë¹„ìŠ¤ë¡œ ì„¤ì • (LLM_SERVICE ê¸°ë³¸ê°’: ollama), GPU_SERVER_URL í™˜ê²½ ë³€ìˆ˜ ì œê±°, chat.py Ollama ê¸°ì¤€ìœ¼ë¡œ ì¬êµ¬í˜„, ëª¨ë“  ë¬¸ì„œ ì—…ë°ì´íŠ¸
- v1.5 (2026-01-26): API ê²½ë¡œ í†µì¼ ì™„ë£Œ - Frontendë¥¼ `/api`ë¡œ ë³€ê²½ (`lib/api/client.ts`), BackendëŠ” ì´ë¯¸ `/api` ì‚¬ìš© ì¤‘ í™•ì¸
- v1.4 (2026-01-26): Backend Mock ì‘ë‹µ ì œê±° ë° ì‹¤ì œ API í˜¸ì¶œ êµ¬í˜„ ì™„ë£Œ - chat.py ìˆ˜ì •, vLLM/Ollama ë¶„ê¸° ì²˜ë¦¬, ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”, session_id ì§€ì› ì¶”ê°€
- v1.3 (2026-01-26): Backend í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ - `.env` íŒŒì¼ ìƒì„±, `config.py`ì— í™˜ê²½ ë³€ìˆ˜ í•„ë“œ ì¶”ê°€, ê° APIë³„ URL ì„¤ì •
- v1.2 (2026-01-26): Server A ì—°ë™ ìƒíƒœ ì—…ë°ì´íŠ¸ - vLLM ì„œë²„ ì‹¤í–‰, GPT-SoVITS WebAPI êµ¬ë™, NPM ì„¤ì • ì™„ë£Œ ë°˜ì˜
- v1.1 (2026-01-26): ë¬¸ì„œ ì •í•©ì„± ì‘ì—… - API ê²½ë¡œ í•´ê²° ë°©ì•ˆ ëª…í™•í™” (Frontendë¥¼ `/api`ë¡œ ë³€ê²½), ëª¨ë¸ ì´ë¦„ í†µì¼
- v1.0 (2026-01-26): ì´ˆê¸° ë¬¸ì„œ ì‘ì„±
