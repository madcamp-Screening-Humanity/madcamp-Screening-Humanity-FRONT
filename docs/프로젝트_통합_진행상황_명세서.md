# 프로젝트 통합 진행상황 명세서

**작성일**: 2026-01-26  
**버전**: 1.11  
**프로젝트명**: Avatar Forge (인생 극장)

---

## 📋 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [전체 아키텍처](#2-전체-아키텍처)
3. [Backend 진행상황](#3-backend-진행상황)
4. [Frontend 진행상황](#4-frontend-진행상황)
5. [통합 상태](#5-통합-상태)
6. [미구현 기능 및 할 일](#6-미구현-기능-및-할-일)
7. [다음 단계](#7-다음-단계)

---

## 1. 프로젝트 개요

### 1.1 프로젝트 구조

```
새 폴더/
├── madcamp-Screening-Humanity-BACK/    # Backend (Server B)
│   └── server-b/backend/               # FastAPI 백엔드
├── madcamp-Screening-Humanity-FRONT/   # Frontend
│   └── (Next.js 프론트엔드)
└── docs/                               # 문서
    ├── Backend_프로젝트_현황_명세서.md
    ├── Front_PROJECT_SPECIFICATION.md
    ├── FINALFINAL.md
    └── 프로젝트_통합_진행상황_명세서.md (이 문서)
```

### 1.2 기술 스택

**Backend (Server B)**:
- Python 3.10+
- FastAPI 0.109.0
- SQLAlchemy 2.0.25 (비동기)
- SQLite (개발용) / PostgreSQL (운영용)
- Google OAuth2 (fastapi-sso)

**Frontend**:
- Next.js 16.0.10
- React 19.2.0
- TypeScript 5
- Tailwind CSS 4.1.9
- Zustand 5.0.10 (상태 관리)
- NextAuth.js 5.0.0-beta.30 (인증)

**Server A (GPU 서버)**:
- vLLM (Gemma 3 27B IT, 4-bit 양자화)
- GPT-SoVITS (TTS)
- Docker 컨테이너 기반

---

## 2. 전체 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│                    사용자 (브라우저)                      │
└────────────────────┬────────────────────────────────────┘
                     │ HTTPS
                     ↓
┌─────────────────────────────────────────────────────────┐
│  Frontend (Next.js)                                     │
│  - Next.js 16.0.10                                      │
│  - React 19.2.0                                         │
│  - Zustand (상태 관리)                                  │
│  - Backend JWT 인증 (HttpOnly Cookie)                  │
└────────────────────┬────────────────────────────────────┘
                     │ HTTP API
                     ↓
┌─────────────────────────────────────────────────────────┐
│  Server B - Backend (FastAPI)                           │
│  - 포트: 8000                                           │
│  - 인증: Google OAuth2 + JWT                            │
│  - 데이터베이스: SQLite/PostgreSQL                       │
│  - API: /api/chat, /api/generate, /api/auth             │
└────────────────────┬────────────────────────────────────┘
                     │ HTTPS (NPM 프록시)
                     ↓
┌─────────────────────────────────────────────────────────┐
│  Server A - GPU 서버                                    │
│  - vLLM (포트 8002)                                     │
│  - GPT-SoVITS (포트 9880)                               │
│  - Nginx Proxy Manager (포트 80/443)                    │
└─────────────────────────────────────────────────────────┘
```

---

## 3. Backend 진행상황

### 3.1 구현 완료 항목 ✅

#### 3.1.1 기본 인프라
- ✅ FastAPI 프로젝트 구조 완성
- ✅ SQLAlchemy 비동기 데이터베이스 설정
- ✅ SQLite 데이터베이스 (개발용)
- ✅ 환경 변수 관리 (Pydantic Settings)
- ✅ CORS 설정

#### 3.1.2 인증 시스템
- ✅ Google OAuth2 로그인 (`/api/auth/google/login`)
- ✅ OAuth 콜백 처리 (`/api/auth/google/callback`)
- ✅ JWT 토큰 발급 및 HttpOnly Cookie 설정
- ✅ 쿠키 기반 JWT 검증 (쿠키 및 Authorization 헤더 지원)
- ✅ 사용자 정보 조회 엔드포인트 (`GET /api/auth/me`)
- ✅ 로그아웃 엔드포인트 (`POST /api/auth/logout`)
- ✅ 사용자 자동 생성 (첫 로그인 시)
- ✅ 보호된 라우트 의존성 (`get_current_user`)

#### 3.1.3 데이터 모델
- ✅ User 모델 (Google OAuth 정보 포함)
- ✅ GenerationJob 모델 (3D 생성 작업 추적)
- ✅ Character 모델 (캐릭터 메타데이터)

#### 3.1.4 API 엔드포인트
- ✅ `POST /api/generate` - 3D 생성 작업 시작
- ✅ `GET /api/generate/status/{job_id}` - 생성 상태 조회
- ✅ `POST /api/chat` - 채팅 API (기본 구조)
- ✅ `GET /api/chat/models` - 모델 목록 조회
- ✅ `GET /api/health` - 헬스 체크
- ✅ `GET /` - 루트 엔드포인트
- ✅ `GET /docs` - Swagger UI 문서
- ✅ `GET /redoc` - ReDoc 문서

#### 3.1.5 비동기 작업 처리
- ✅ BackgroundTasks를 이용한 비동기 처리
- ✅ 작업 상태 추적 (pending → processing → completed/failed)
- ✅ 진행률 업데이트

### 3.2 부분 구현 / 수정 필요 항목 ⚠️

#### 3.2.1 채팅 API (`/api/chat`)
**현재 상태**: 기본 구조는 완성되었으나 Mock 응답 사용 중

**파일**: `server-b/backend/app/api/chat.py`

**실제 코드 확인 결과**: ✅ **업데이트 완료**
```python
# 현재 구현 (실제 코드) ✅ 업데이트됨
# model: str = "gemma-3-27b-it"  # ✅ 문서와 일치
# LLM_SERVICE 기본값: "ollama" (Ollama 기준으로 구현)

# Ollama API 호출 (기본 사용)
# api_url = f"{settings.OLLAMA_BASE_URL}/api/chat"
# response = await client.post(api_url, json={...})
# vLLM 코드는 주석 처리되어 있음

# Server A 연결 시도, 실패 시 Mock 응답 반환
try:
    llm_service_url = f"{settings.GPU_SERVER_URL.replace('8001', '8002')}/chat"
    response = await client.post(llm_service_url, json=request.model_dump())
    return response.json()
except Exception as e:
    # Mock 응답 반환 (개발용)
    return {
        "success": True,
        "data": {
            "content": f"[Mock Response from Server B] Server A 연결 실패. ({e}) 안녕하세요! {current_user.username}님.",
            "usage": {"prompt_tokens": 0, "completion_tokens": 0}
        }
    }
```

**✅ 구현 완료**:
- [x] 모델 이름 통일: `gemma-3-27b-it` (기본값) ✅
- [x] 환경 변수 설정: `OLLAMA_BASE_URL`, `TTS_BASE_URL`, `FRONTEND_URL` ✅
- [x] Mock 응답 제거, 실제 API 호출로 변경 ✅
- [x] Ollama API 형식에 맞게 요청/응답 변환 ✅
- [x] vLLM 코드 주석 처리 (필요 시 주석 해제 가능) ✅
- [x] `session_id` 필드 추가 (선택, 자동 생성) ✅
- [x] 에러 처리 강화 ✅

**참고**: 
- `docs/PROJECT_API_SUMMARY.md`의 "Server A vLLM API" 섹션 참조
- `docs/LLM_SERVICE_COMPARISON.md` - vLLM vs Ollama 비교

### 3.3 미구현 기능 ❌

#### 3.3.1 Phase 5.2: 컨텍스트 절약 요약 기능 (필수, 미구현)

**구현 위치**: `server-b/backend/app/services/context_manager.py` (신규 생성 필요)

**필요한 기능**:
- [ ] Redis 설치 및 설정
- [ ] `ContextManager` 서비스 구현
- [ ] 세션별 대화 히스토리 저장/조회
- [ ] 토큰 수 계산 및 모니터링
- [ ] 자동 요약 트리거 (컨텍스트 80% 사용 시)
- [ ] 슬라이딩 윈도우 전략 (최근 15-18턴 유지, 이전 턴 요약)
- [ ] 요약 캐싱 (성능 최적화)
- [ ] `chat.py`에 통합

**구현 시기**: Phase 5.1 완료 후 즉시 (우선순위: 높음, 필수)

**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.2: 컨텍스트 절약 요약 기능 구현" 섹션 참조

#### 3.3.2 Phase 5.3: 동시 접속 제한 (필수, 미구현)

**구현 위치**: `server-b/backend/app/core/rate_limiter.py` (신규 생성 필요)

**필요한 기능**:
- [ ] Redis 설정 (세션 카운터용, Phase 5.2와 동일)
- [ ] `ConcurrentUserLimiter` 구현
- [ ] 활성 세션 수 추적
- [ ] 최대 동시 접속자 수 제한 (기본: 20명, 환경 변수로 설정 가능)
- [ ] 세션 등록/해제
- [ ] 503 에러 반환 (제한 초과 시)
- [ ] Middleware 또는 Dependency로 통합

**구현 시기**: Phase 5.1 완료 후 즉시 (우선순위: 높음, 필수)

**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.3: 동시 접속 제한 구현" 섹션 참조

#### 3.3.3 TTS API ✅ **구현 완료**

**현재 상태**: ✅ 완전 구현 완료

**구현된 기능**:
- [x] `app/api/tts.py` 생성 ✅
- [x] `POST /api/tts` - 텍스트-음성 변환 ✅
- [x] `GET /api/tts/voices` - 음성 목록 조회 ✅
- [x] Server A GPT-SoVITS 연동 ✅
- [x] 캐싱 시스템 (데이터베이스 기반) ✅
- [x] 오디오 파일 메타데이터 분석 (mutagen) ✅
- [x] 사용자별 파일 저장 ✅
- [x] 바이너리 직접 반환 옵션 (`return_binary`) ✅
- [x] streaming_mode 지원 (0-3) ✅
- [x] voice_id 매핑 시스템 (`app/config/voices.json`) ✅

**참고**: 
- `docs/GPT-SoVITS WebAPI(api_v2.py).md` 참조
- `docs/구현_상태_요약_2026-01-26.md` 상세 구현 내역 참조

---

#### 3.3.4 캐릭터 API ✅ **구현 완료**

**현재 상태**: ✅ 완전 구현 완료

**구현된 기능**:
- [x] `app/api/characters.py` 생성 ✅
- [x] `GET /api/characters/presets` - 사전설정 캐릭터 목록 조회 ✅
- [x] `GET /api/characters` - 사용자 저장 캐릭터 목록 조회 ✅
- [x] `POST /api/characters` - 새 캐릭터 생성 ✅
- [x] `GET /api/characters/{character_id}` - 캐릭터 상세 조회 ✅
- [x] `PUT /api/characters/{character_id}` - 캐릭터 수정 ✅
- [x] `DELETE /api/characters/{character_id}` - 캐릭터 삭제 ✅
- [x] 파일 변경 감지 기반 캐싱 (mtime 추적) ✅
- [x] Character 모델 확장 (persona, voice_id, character 필드) ✅

**참고**: 
- `docs/구현_상태_요약_2026-01-26.md` 상세 구현 내역 참조

---

#### 3.3.5 AI 생성 API ✅ **구현 완료** (2026-01-26)

**파일**: `app/api/ai.py`

**현재 상태**: ✅ 완전 구현 완료 (Gemini SDK 도입 완료)

**구현된 기능**:
- [x] `POST /api/ai/generate/story` - 상황 분석 및 드라마틱한 줄거리 생성 ✅
- [x] `POST /api/ai/generate/character-details` - 캐릭터 상세 설정 자동 생성 (JSON) ✅
- [x] **Google Generative AI SDK (`google-generativeai`) 도입** ✅
  - 공식 Python SDK 사용으로 코드 간소화 및 안정성 향상
  - 비동기 API 호출 (`generate_content_async`)
  - JSON Mode 지원 (`response_mime_type="application/json"`)
  - System Instruction 지원 (`system_instruction` 파라미터)
- [x] **Safety Settings 적용** ✅
  - 기본값: `BLOCK_NONE` (무검열)
  - 환경변수로 조절 가능 (`GOOGLE_SAFETY_THRESHOLD`)
  - 지원 값: `BLOCK_NONE`, `BLOCK_ONLY_HIGH`, `BLOCK_MEDIUM_AND_ABOVE`, `BLOCK_LOW_AND_ABOVE`
- [x] **환경변수 기반 설정** ✅
  - `GOOGLE_API_KEY`: Gemini API 키 (필수)
  - `GOOGLE_API_MODEL`: 사용할 모델 (기본값: `gemini-1.5-flash`)
  - `GOOGLE_SAFETY_THRESHOLD`: 안전 설정 (기본값: `BLOCK_NONE`)
  - 폴백: `NEXT_PUBLIC_GEMINI_API_KEY` (개발 환경 편의)
- [x] 성능 모니터링: API 호출 시간 측정 및 로깅 ✅

**의존성**:
- `google-generativeai` 패키지 (`requirements.txt`에 추가됨)

**참고 문서**:
- [Gemini API 사용해보기](https://velog.io/@dyd1308/Gemini-api-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0)
- [Gemini 모델 버전](https://ai.google.dev/gemini-api/docs/models?hl=ko#model-versions)

---

## 4. Frontend 진행상황

### 4.1 구현 완료 항목 ✅

#### 4.1.1 기본 인프라
- ✅ Next.js 16.0.10 프로젝트 구조 완성
- ✅ TypeScript 설정 완료
- ✅ Tailwind CSS 설정 완료
- ✅ shadcn/ui 컴포넌트 라이브러리 (50+ 컴포넌트)

#### 4.1.2 인증 시스템
- ✅ Backend JWT 기반 인증 통합
- ✅ Google OAuth 로그인 플로우 (Backend로 직접 이동)
- ✅ 인증 콜백 라우트 (`/auth/callback`)
- ✅ 사용자 정보 조회 (로그인 후 자동 조회)
- ✅ 로그인/로그아웃 컴포넌트 (`SignIn`, `SignOut`)
- ✅ 랜딩 페이지에 사용자 이름 및 로그아웃 버튼 표시
- ✅ HttpOnly Cookie 기반 인증 상태 관리
- ✅ API 클라이언트 쿠키 자동 전달 (`credentials: 'include'`)

#### 4.1.3 상태 관리
- ✅ Zustand 스토어 설정
- ✅ localStorage 지속성 (채팅 기록, 사용자 정보)
- ✅ 앱 단계 관리 (`step`)
- ✅ 게임 상태 관리 (모드, 아바타, 시나리오)

#### 4.1.4 주요 컴포넌트
- ✅ `LandingPage` - 랜딩 페이지
- ✅ `ModeSelectModal` - 게임 모드 선택
- ✅ `CharacterSelectModal` - 캐릭터 선택 모달 (신규) ✅
- ✅ `CharacterCreationWizard` - 캐릭터 생성 위저드 (신규) ✅
- ✅ `CharacterCard` - 캐릭터 카드 컴포넌트 (신규) ✅
- ✅ `AvatarUpload` - 아바타 업로드
- ✅ `AvatarPreview` - 3D 아바타 미리보기
- ✅ `ScenarioSetup` - 시나리오 설정
- ✅ `ScriptPreview` - 스크립트 미리보기
- ✅ `LoadingScreen` - 로딩 화면
- ✅ `ChatRoom` - 채팅방 (기본 구조)

#### 4.1.5 API 클라이언트
- ✅ API 클라이언트 구조 완성 (`lib/api/client.ts`)
- ✅ 타입 정의 (`lib/api/types.ts`)
- ✅ 채팅 API 클라이언트 (`chatApi`)
- ✅ 생성 API 클라이언트 (`generationApi`)
- ✅ TTS API 클라이언트 (`ttsApi`)
- ✅ 캐릭터 API 클라이언트 (`characterApi`) (신규) ✅
- ✅ Gemini API 클라이언트 (`lib/api/gemini.ts`) (신규) ✅

#### 4.1.6 API Route (Next.js)
- ✅ 캐릭터 API Route (`app/api/characters/route.ts`) (신규) ✅
  - `public/characters/*.json` 파일 동적 로드
  - **비동기 처리 개선** (2026-01-26):
    - 동기식 파일 처리(`fs.readFileSync`) → 비동기식(`fs.promises`) 전환 ✅
    - `Promise.all()`을 사용한 병렬 파일 로드 ✅
    - 예외 처리 강화 (각 파일별 try-catch) ✅
    - 디렉토리 존재 확인 (`fs.promises.access`) ✅
    - 파일 타입 확인 (`stats.isFile()`) ✅
  - 자동 마이그레이션: 파일 로드 시 `persona` 필드 자동 제거
  - 프리셋 우선 정렬

#### 4.1.6 커스텀 훅
- ✅ `use-chat.ts` - 채팅 기능 훅
- ✅ `use-generation.ts` - 3D 생성 훅
- ✅ `use-tts.ts` - TTS 훅
- ✅ `use-mobile.ts` - 모바일 감지 훅
- ✅ `use-toast.ts` - 토스트 알림 훅

#### 4.1.7 캐릭터 선택/생성 기능 ✅ **구현 완료**

**구현된 컴포넌트**:
- ✅ `CharacterSelectModal` - 캐릭터 선택 모달
  - 사전설정 캐릭터 탭 (로컬 JSON 우선, 백엔드 폴백)
  - 저장된 캐릭터 탭
  - 새로 만들기 탭
  - 반응형 그리드 레이아웃
  - Lazy loading
  - Toast 기반 에러 처리
- ✅ `CharacterCreationWizard` - 캐릭터 생성 위저드
  - 4단계 위저드 (이름/작품 입력, Persona 상세 입력, Voice 선택, 미리보기)
  - AI 자동 생성 (Gemini API)
  - Persona 구조화 파싱
  - Voice 미리보기
  - 접근성 개선
- ✅ `CharacterCard` - 캐릭터 카드 컴포넌트
  - 이미지 Fallback 체인
  - 접근성 개선
  - Lazy loading

**구현된 유틸리티**:
- ✅ `lib/config/character.ts` - 설정 파일 (하드코딩 제거)
- ✅ `lib/utils/persona-parser.ts` - Persona 파서
- ✅ `lib/api/errors.ts` - 에러 처리 시스템
- ✅ `public/characters.json` - 공개 캐릭터 JSON (백엔드 독립성)

**상세 구현 내역**: `docs/구현_상태_요약_2026-01-26.md` 참조

#### 4.1.8 캐릭터 시스템 고도화 ✅ **구현 완료** (2026-01-26)

**작업 내용**: 캐릭터의 깊이감 있는 페르소나 구현과 효율적인 생성/관리 시스템 구축

**주요 변경사항**:

1. **데이터 구조 세분화** ✅
   - 단순 텍스트(persona) 중심에서 10개 이상의 상세 필드 객체 구조로 전환
   - 주요 필드: `personality`, `appearance`, `likes`, `dislikes`, `speech_style`, `thoughts`, `features`, `habits`, `guidelines`
   - 기타 필드: `gender`, `species`, `age`, `height`, `job`, `description`
   - 9종 캐릭터 마이그레이션 완료 (유즈, 헤르미온느, 토토로, 셜록, 나루토, 요다, 엘사, 간달프, 피카츄)

2. **파일 기반 관리 시스템** ✅
   - `app/api/characters/route.ts` 생성: `public/characters/*.json` 파일을 동적으로 로드하는 API Route
   - 자동 마이그레이션: 파일 로드 시 `persona` 필드가 남아있으면 자동으로 삭제하고 정규화된 스펙으로 덮어쓰기
   - API 클라이언트 수정: 캐릭터 목록 조회를 정적 import에서 API 호출 방식으로 전환

3. **AI 자동 완성 기능 고도화** ✅
   - `lib/api/gemini.ts` 개편: `generateCharacterSpec()` 함수 구현
   - 사용자의 최소 입력만으로 나무위키 수준의 상세 캐릭터 설정을 JSON 형태로 자동 생성
   - 시스템 프롬프트 강화: 더 구체적인 캐릭터성과 풍부한 배경 스토리를 생성하도록 지시
   - 재시도 로직 (지수 백오프, 최대 3회)

4. **프론트엔드 UI/UX 혁신** ✅
   - `CharacterCreationWizard` 전면 개편:
     - **Step 1 간소화**: 이름, 카테고리, 작품명(출처) 3가지만 입력
     - **'다음' 버튼 클릭 시 AI 자동 생성**: Step 1에서 입력한 정보를 바탕으로 AI가 나머지 모든 상세 정보 자동 생성
     - **Step 2 통합 편집**: AI가 생성한 모든 정보(기본 정보 + 상세 페르소나)를 한 화면에서 확인 및 수정
     - **'AI 다시 생성' 버튼**: 마음에 들지 않으면 재시도 가능 (최대 2회, 총 3회 제한)
     - **AI 재생성 횟수 제한**: 버튼에 남은 횟수 표시, 모든 기회 소진 시 비활성화
     - 작품명 필드 추가로 AI가 원작 정보를 더 정확하게 반영
     - 그리드 레이아웃을 사용한 효율적인 데이터 입력 구조

5. **시스템 최적화 (페르소나 빌더)** ✅
   - `lib/utils/persona-builder.ts` 유틸리티 생성:
     - `buildSystemPersona()` 함수: JSON에 저장된 무거운 문자열을 제거하고, 런타임에 상세 필드들을 조합해 LLM용 시스템 프롬프트를 동적으로 생성
     - 하위 호환성: 기존 `persona` 필드가 있으면 그대로 사용
   - `ChatRoom` 로직 수정:
     - 채팅 시작 및 진행 시 동적으로 빌드된 페르소나와 캐릭터 이름 기반의 명령형 지시문("이제 아래 답변을 받은 OO 처럼 답변하십시오")을 자동 추가
     - 데이터 중복 제거: 저장 시 무거운 persona 문자열 대신 상세 필드만 저장

6. **캐릭터 데이터 확장** ✅ (2026-01-26)
   - **worldview 필드 추가**: 9종 캐릭터 모두에 작품/출처 기반 세계관 정보 추가
     - 엘사: "겨울왕국 세계관"
     - 간달프: "반지의 제왕 세계관 (중간계)"
     - 헤르미온느: "해리포터 세계관 (호그와트 마법 세계)"
     - 나루토: "나루토 세계관 (닌자 세계)"
     - 피카츄: "포켓몬 세계관"
     - 셜록: "셜록 홈즈 세계관 (19세기 런던)"
     - 토토로: "지브리 세계관 (일본 시골 마을)"
     - 요다: "스타워즈 세계관 (은하계)"
     - 유즈: "판타지 세계관"

**구현된 파일**:
- ✅ `app/api/characters/route.ts` - API Route (신규 생성)
- ✅ `lib/api/gemini.ts` - AI 자동 생성 로직 (수정 완료)
- ✅ `lib/utils/persona-builder.ts` - 페르소나 빌더 (신규 생성)
- ✅ `components/character-creation-wizard.tsx` - 위저드 (수정 완료)
- ✅ `components/chat-room.tsx` - 채팅방 (수정 완료)
- ✅ `public/characters/*.json` - 9종 캐릭터 데이터 (마이그레이션 완료)

**기대 효과**:
- ✅ 데이터 무결성: 필드 기반 관리로 데이터 중복을 제거하고 토큰 효율성을 높임
- ✅ 런타임 페르소나 빌드로 항상 최신 상태 반영
- ✅ AI 자동 생성으로 캐릭터 생성 시간 단축
- ✅ 나무위키 수준의 상세한 캐릭터 정보 자동 생성

**상세 구현 내역**: `docs/구현_상태_요약_2026-01-26.md`의 "5. 캐릭터 시스템 고도화 작업 완료 내역" 섹션 참조

#### 4.1.9 서버 에러 해결 및 백엔드 Gemini SDK 도입 ✅ **구현 완료** (2026-01-26)

**작업 내용**: 프론트엔드 500 에러 해결 및 백엔드 Gemini SDK 도입

**주요 변경사항**:

1. **프론트엔드 500 에러 해결** ✅
   - `/api/characters` API 비동기 처리 개선:
     - 동기식 파일 처리(`fs.readFileSync`) → 비동기식(`fs.promises`) 전환
     - `Promise.all()`을 사용한 병렬 파일 로드
     - 예외 처리 강화 (각 파일별 try-catch)
     - 디렉토리 존재 확인 (`fs.promises.access`)
     - 파일 타입 확인 (`stats.isFile()`)

2. **백엔드 Gemini SDK 도입** ✅
   - `google-generativeai` 패키지 추가 (`requirements.txt`)
   - `app/api/ai.py` 리팩토링:
     - 공식 Python SDK 사용으로 코드 간소화 및 안정성 향상
     - 비동기 API 호출 (`generate_content_async`)
     - JSON Mode 지원 (`response_mime_type="application/json"`)
     - System Instruction 지원 (`system_instruction` 파라미터)

3. **백엔드 SDK 고도화** ✅
   - Safety Settings 적용:
     - 기본값: `BLOCK_NONE` (무검열)
     - 환경변수로 조절 가능 (`GOOGLE_SAFETY_THRESHOLD`)
     - 지원 값: `BLOCK_NONE`, `BLOCK_ONLY_HIGH`, `BLOCK_MEDIUM_AND_ABOVE`, `BLOCK_LOW_AND_ABOVE`

4. **환경변수 기반 설정** ✅
   - `GOOGLE_API_KEY`: Gemini API 키 (필수)
   - `GOOGLE_API_MODEL`: 사용할 모델 (기본값: `gemini-1.5-flash`)
   - `GOOGLE_SAFETY_THRESHOLD`: 안전 설정 (기본값: `BLOCK_NONE`)
   - 폴백: `NEXT_PUBLIC_GEMINI_API_KEY` (개발 환경 편의)

**구현된 파일**:
- ✅ `app/api/characters/route.ts` - 비동기 처리 개선 (수정 완료)
- ✅ `app/api/ai.py` - Gemini SDK 도입 (수정 완료)
- ✅ `requirements.txt` - google-generativeai 패키지 추가 (수정 완료)

**참고 문서** (⚠️ **필수 참고**):
- [Gemini API 사용해보기](https://velog.io/@dyd1308/Gemini-api-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0) - Gemini API 사용 시 반드시 참고
- [Gemini 모델 버전](https://ai.google.dev/gemini-api/docs/models?hl=ko#model-versions) - 모델 선택 시 반드시 참고

**상세 구현 내역**: `docs/구현_상태_요약_2026-01-26.md`의 "8. 서버 에러 해결 및 백엔드 Gemini SDK 도입" 섹션 참조

### 4.2 부분 구현 / 수정 필요 항목 ⚠️

#### 4.2.1 채팅방 (`ChatRoom`)

**파일**: `components/chat-room.tsx`

**현재 상태**: ✅ **완전 구현 완료**
- ✅ 기본 UI 구조 완성
- ✅ 메시지 표시/입력 기능
- ✅ 3D 아바타 렌더링
- ✅ **실제 API 연동 완료** (하드코딩된 응답 완전 제거)
- ✅ **세션 관리 로직 완료** (UUID 자동 생성)
- ✅ **턴 제한 설정화 완료** (환경 변수 지원, 기본값: 30)
- ✅ **TTS 통합 완료** (3가지 모드: 실시간/지연/클릭)
- ✅ **에러 처리 개선 완료** (Toast, 재시도 메커니즘)

**✅ 인증 시스템 통합 완료**:
- [x] NextAuth.js 제거 완료 ✅
- [x] Backend JWT 기반 인증으로 통일 ✅
- [x] HttpOnly Cookie 기반 인증 구현 ✅
- [x] 로그인/로그아웃 플로우 정리 완료 ✅
- [x] API 클라이언트 쿠키 전달 설정 완료 ✅

**✅ 구현 완료된 기능**:
- [x] 세션 ID 자동 생성 (`crypto.randomUUID()`) ✅
- [x] 초기 메시지 API 생성 (sample_dialogue 우선, API 폴백) ✅
- [x] 실제 API 호출 (`chatApi.chat()` 직접 호출) ✅
- [x] scenario 정보 포함 (opponent, situation, background) ✅
- [x] TTS 설정 포함 (tts_enabled, tts_mode, tts_delay_ms, tts_streaming_mode) ✅
- [x] 오디오 재생 (realtime/delayed/on_click 모드) ✅
- [x] 에러 처리 (Toast, retryWithBackoff) ✅
- [x] 턴 제한 설정화 (환경 변수 `NEXT_PUBLIC_MAX_TURNS` 지원) ✅

**상세 구현 내역**: `docs/구현_상태_요약_2026-01-26.md`의 "ChatRoom API 연동 및 TTS 통합 구현 상세" 섹션 참조

#### 4.2.2 ChatRoom TTS 통합 ✅ **구현 완료**

**파일**: 
- `components/chat-room.tsx` (수정 완료)
- `components/tts-settings-modal.tsx` (신규 생성)

**현재 상태**: ✅ 완전 구현 완료

**구현된 기능**:
- [x] TTS 설정 모달 (`TtsSettingsModal` 컴포넌트) ✅
- [x] TTS 호출 방식 선택 (realtime/delayed/on_click) ✅
- [x] streaming_mode 선택 (0-3) ✅
- [x] 지연 시간 설정 (슬라이더, 0-5000ms) ✅
- [x] TTS 활성화/비활성화 토글 ✅
- [x] ChatRoom 헤더에 TTS 설정 버튼 추가 ✅
- [x] 오디오 재생 구현 (3가지 모드) ✅
- [x] 메시지에 오디오 아이콘 표시 (Volume2 아이콘) ✅
- [x] 메시지 클릭 시 오디오 재생 (on_click 모드) ✅
- [x] 재생 중 상태 표시 (아이콘 펄스) ✅

**상세 구현 내역**: `docs/구현_상태_요약_2026-01-26.md`의 "ChatRoom API 연동 및 TTS 통합 구현 상세" 섹션 참조

#### 4.2.3 페르소나 전달 방식 개선 ✅ **구현 완료**

**파일**: 
- `server-b/backend/app/api/chat.py` (수정 완료)
- `components/chat-room.tsx` (수정 완료)

**현재 상태**: ✅ 완전 구현 완료

**구현된 기능**:
- [x] Backend `format_persona_for_roleplay()` 함수 구현 ✅
- [x] ChatRequest에 scenario 필드 추가 (opponent, situation, background) ✅
- [x] chat 엔드포인트에서 format_persona_for_roleplay() 사용 ✅
- [x] Character.name 사용 (페르소나 포맷팅에 포함) ✅
- [x] Frontend ChatRequest 타입에 scenario 필드 추가 ✅
- [x] ChatRoom에서 scenario 정보 포함 (모든 chatApi.chat() 호출) ✅
- [x] Backend 로깅 추가 (개발 환경, DEBUG 환경 변수 기반) ✅
- [x] Frontend 로깅 추가 (개발 환경, NODE_ENV 기반) ✅

**페르소나 포맷팅 형식**:
```
당신은 {character_name}입니다.

{persona}

현재 상황: {situation}
배경: {background}
상대방: {opponent}

중요 지침:
- 캐릭터의 성격과 말투를 일관되게 유지하세요.
- 사용자와 자연스럽게 대화하세요.
- 캐릭터의 특성을 반영한 응답을 생성하세요.
- 이전 대화의 맥락을 고려하여 응답하세요.
```

**상세 구현 내역**: `docs/구현_상태_요약_2026-01-26.md`의 "페르소나 전달 방식 개선 구현 상세" 섹션 참조

### 4.3 미구현 기능 ❌

#### 4.3.1 Phase 5.2: 컨텍스트 절약 요약 기능 (필수, 미구현)

**구현 위치**: `server-b/backend/app/services/context_manager.py` (신규 생성 필요)

**필요한 작업**:
- [ ] Redis 설치 및 설정
- [ ] `ContextManager` 서비스 구현
- [ ] 세션별 대화 히스토리 저장/조회
- [ ] 토큰 수 계산 및 모니터링
- [ ] 자동 요약 트리거 (컨텍스트 80% 사용 시)
- [ ] 슬라이딩 윈도우 전략 (최근 15-18턴 유지, 이전 턴 요약)
- [ ] 요약 캐싱 (성능 최적화)
- [ ] `chat.py`에 통합

**구현 시기**: Phase 5.1 완료 후 즉시 (우선순위: 높음, 필수)

**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.2: 컨텍스트 절약 요약 기능 구현" 섹션 참조

#### 4.3.2 Phase 5.3: 동시 접속 제한 (필수, 미구현)

**구현 위치**: `server-b/backend/app/core/rate_limiter.py` (신규 생성 필요)

**필요한 작업**:
- [ ] Redis 설정 (세션 카운터용, Phase 5.2와 동일)
- [ ] `ConcurrentUserLimiter` 구현
- [ ] 활성 세션 수 추적
- [ ] 최대 동시 접속자 수 제한 (기본: 20명, 환경 변수로 설정 가능)
- [ ] 세션 등록/해제
- [ ] 503 에러 반환 (제한 초과 시)
- [ ] Middleware 또는 Dependency로 통합

**구현 시기**: Phase 5.1 완료 후 즉시 (우선순위: 높음, 필수)

**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.3: 동시 접속 제한 구현" 섹션 참조

---

## 5. 통합 상태

### 5.1 Backend ↔ Frontend 연동

#### 5.1.1 인증 연동 ✅ **완료**
- ✅ Backend: Google OAuth2 구현 완료
- ✅ Backend: JWT HttpOnly Cookie 설정 완료
- ✅ Backend: 사용자 정보 조회 엔드포인트 구현 완료 (`GET /api/auth/me`)
- ✅ Backend: 로그아웃 엔드포인트 구현 완료
- ✅ Frontend: Backend JWT 기반 인증으로 통일 완료
- ✅ Frontend: NextAuth.js 제거 완료
- ✅ Frontend: 인증 콜백 라우트 구현 완료
- ✅ Frontend: 사용자 정보 조회 및 표시 구현 완료
- ✅ Frontend: 랜딩 페이지에 로그아웃 버튼 추가 완료
- ✅ Frontend: API 클라이언트 쿠키 전달 설정 완료
- ✅ 로그인/로그아웃 플로우 정리 완료

#### 5.1.2 API 경로
- ✅ **경로 통일 완료**:
  - Backend: `/api/chat` 사용 (`main.py`: `settings.API_V1_STR = "/api"`) ✅
  - Frontend: `/api/chat` 사용 (`lib/api/client.ts`: `API_V1 = "${API_BASE_URL}/api"`) ✅
- ✅ **구현 완료**: Frontend 경로를 `/api`로 변경 완료

#### 5.1.3 채팅 API 연동 ✅ **완료**
- ✅ **완전 연동**:
  - Frontend: 실제 API 호출 구현 완료 (`chatApi.chat()` 직접 호출) ✅
  - Backend: 실제 API 호출 구현 완료 (Ollama API) ✅
  - Backend: TTS 통합 완료 (자동 TTS 호출) ✅
  - Frontend: TTS 통합 완료 (오디오 재생) ✅
  - 세션 관리 완료 (UUID 자동 생성) ✅
  - 페르소나 전달 방식 개선 완료 ✅

### 5.2 Backend ↔ Server A 연동

#### 5.2.1 LLM 서비스 연동
- ✅ **Server A 설정 완료**:
  - Server A: ✅ vLLM 서버 실행 완료
  - Server A: ✅ NPM 설정 완료
- ✅ **Backend 연동 완료**:
  - Backend: ✅ Mock 응답 제거 완료
  - Backend: ✅ 실제 API 호출 구현 완료
  - Backend: ✅ vLLM/Ollama 분기 처리 완료
  - Backend: ✅ 에러 처리 강화 완료
  - Backend: ✅ session_id 지원 완료

#### 5.2.2 TTS 서비스 연동 ✅ **완료**
- ✅ **Server A 설정 완료**:
  - Server A: ✅ GPT-SoVITS WebAPI 구동 완료
- ✅ **Backend 연동 완료**:
  - Backend: ✅ TTS API 구현 완료 (`app/api/tts.py`)
  - Backend: ✅ Server A GPT-SoVITS 연동 완료
  - Backend: ✅ Chat API에 TTS 통합 완료 (자동 TTS 호출)
  - Frontend: ✅ TTS 설정 모달 구현 완료
  - Frontend: ✅ 오디오 재생 구현 완료 (3가지 모드)

---

## 6. 미구현 기능 및 할 일

### 6.1 Phase 5.1: 기본 채팅 기능 (진행 중)

#### Server A 설정 ✅ **완료**
- [x] vLLM 서버 실행 (Docker 컨테이너) ✅
- [x] GPT-SoVITS WebAPI 구동 (포트 9880) ✅
- [x] Server A NPM 설정 (vLLM, GPT-SoVITS 프록시) ✅
- [x] SSL 인증서 설정 (Let's Encrypt 또는 자체 서명) ✅

#### Server B Backend 수정 ✅ **완료**
- [x] Server A API URL 환경 변수 설정 ✅ (VLLM_BASE_URL, OLLAMA_BASE_URL, TTS_BASE_URL)
- [x] Mock 응답 제거, 실제 API 호출로 변경 ✅
- [x] vLLM/Ollama API 형식에 맞게 요청/응답 변환 ✅
- [x] API 경로 확인 완료 (Backend는 이미 `/api` 사용 중) ✅
- [x] TTS API 구현 (`app/api/tts.py`) ✅
- [x] Chat API에 TTS 통합 ✅
- [x] 페르소나 전달 방식 개선 (`format_persona_for_roleplay()`) ✅

#### Frontend 수정 ✅ **완료**
- [x] Frontend API 경로 통일 (`/api`로 변경) ✅
- [x] `ChatRoom`에서 실제 API 연동 ✅
- [x] 하드코딩된 응답 제거 ✅
- [x] TTS 통합 완료 (TTS 설정 모달, 오디오 재생) ✅
- [x] 세션 관리 완료 (UUID 자동 생성) ✅
- [x] 턴 제한 설정화 완료 (환경 변수 지원) ✅

#### 통합 테스트
- [ ] 엔드투엔드 채팅 테스트 (Frontend → Backend → Server A vLLM)
- [ ] TTS 음성 출력 테스트
- [ ] 에러 핸들링 테스트

### 6.2 Phase 5.2: 컨텍스트 절약 요약 기능 (필수, 미구현)

**우선순위**: 높음 (필수)

**필요한 작업**:
- [ ] Redis 설치 및 설정
- [ ] `app/services/context_manager.py` 생성
- [ ] 세션 기반 히스토리 관리 구현
- [ ] 자동 요약 로직 구현 (컨텍스트 80% 사용 시)
- [ ] 슬라이딩 윈도우 전략 구현 (최근 15-18턴 유지)
- [ ] 요약 캐싱 구현
- [ ] `chat.py`에 통합

**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.2: 컨텍스트 절약 요약 기능 구현" 섹션 참조

### 6.3 Phase 5.3: 동시 접속 제한 (필수, 미구현)

**우선순위**: 높음 (필수)

**필요한 작업**:
- [ ] Redis 설정 (세션 카운터용, Phase 5.2와 동일)
- [ ] `app/core/rate_limiter.py` 생성
- [ ] `ConcurrentUserLimiter` 구현
- [ ] 활성 세션 수 추적
- [ ] 최대 동시 접속자 수 제한 (기본: 20명)
- [ ] 세션 등록/해제
- [ ] 503 에러 반환 (제한 초과 시)
- [ ] Middleware 또는 Dependency로 통합

**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.3: 동시 접속 제한 구현" 섹션 참조

### 6.4 Phase 5.4: Frontend 턴 제한 설정화 ✅ **구현 완료**

**구현 위치**: `components/chat-room.tsx`

**구현 완료된 작업**:
- [x] `maxTurns` 하드코딩 제거, 환경 변수 지원 추가 ✅
- [x] 세션 관리 로직 추가 (세션 ID 생성/유지, `crypto.randomUUID()`) ✅
- [x] API 호출 시 `session_id` 포함 ✅
- [x] 턴 제한 설정화 (환경 변수 `NEXT_PUBLIC_MAX_TURNS` 지원, 기본값: 30) ✅

**상태**: ✅ 구현 완료 (2026-01-26)  
**상세 가이드**: `docs/PHASE5_SETUP.md`의 "Phase 5.4: Frontend 턴 제한 설정화" 섹션 참조

### 6.5 기타 미구현 기능

#### TTS 음성 목록 조회 ✅ **구현 완료**
- [x] `GET /api/tts/voices` 구현 ✅
- [x] Frontend UI 추가 (캐릭터 생성 위저드에 통합) ✅

#### 3D 생성 기능
- ⚠️ 기본 구조는 완성되었으나 실제 Server A 연동 필요
- [ ] Server A CharacterGen 서비스 구동
- [ ] Backend에서 Server A 연동

---

## 7. 다음 단계

### 7.1 즉시 진행 (Phase 5.1 완료)

**목표**: 기본 채팅 기능 완성

1. **Server A 설정** ✅ **완료** (1-2일)
   - [x] vLLM 서버 실행 ✅
   - [x] GPT-SoVITS WebAPI 구동 ✅
   - [x] Server A NPM 설정 ✅

2. **Server B Backend 수정** ✅ **완료** (1일)
   - [x] Mock 응답 제거 ✅
   - [x] 실제 API 호출로 변경 ✅
   - [x] TTS API 구현 ✅
   - [x] Chat API에 TTS 통합 ✅
   - [x] 페르소나 전달 방식 개선 ✅

3. **Frontend 수정** ✅ **완료** (1일)
   - [x] API 경로 통일 ✅ (Frontend를 `/api`로 변경 완료)
   - [x] 실제 API 연동 ✅
   - [x] 하드코딩된 응답 제거 ✅
   - [x] TTS 통합 완료 ✅
   - [x] 세션 관리 완료 ✅
   - [x] 턴 제한 설정화 완료 ✅

4. **통합 테스트** (1일)
   - [ ] 엔드투엔드 테스트
   - [ ] 에러 핸들링 테스트

### 7.2 Phase 5.1 완료 후 즉시 (필수)

**목표**: 무제한 대화 지원 및 동시 접속 제한

1. **Phase 5.2: 컨텍스트 절약 요약 기능** (2-3일)
   - [ ] Redis 설치
   - [ ] ContextManager 구현
   - [ ] 자동 요약 로직 구현

2. **Phase 5.3: 동시 접속 제한** (1-2일)
   - [ ] ConcurrentUserLimiter 구현
   - [ ] Middleware 통합

3. **Phase 5.4: Frontend 턴 제한 설정화** ✅ **완료** (1일)
   - [x] 턴 제한 설정화 (환경 변수 지원) ✅
   - [x] 세션 관리 추가 ✅

### 7.3 우선순위 요약

| 우선순위 | 작업 | 예상 기간 | 상태 |
|---------|------|----------|------|
| 🔴 높음 | Phase 5.1 완료 (Server A 연동) | 3-5일 | ✅ 완료 |
| 🔴 높음 | Phase 5.2: 컨텍스트 절약 요약 | 2-3일 | ❌ 미구현 |
| 🔴 높음 | Phase 5.3: 동시 접속 제한 | 1-2일 | ❌ 미구현 |
| 🟡 중간 | Phase 5.4: Frontend 턴 제한 설정화 | 1일 | ✅ 완료 |
| 🟡 중간 | TTS 음성 목록 조회 | 1일 | ✅ 완료 |
| 🔴 높음 | ChatRoom API 연동 및 TTS 통합 | 1일 | ✅ 완료 |
| 🔴 높음 | 페르소나 전달 방식 개선 | 1일 | ✅ 완료 |

---

## 8. 참고 문서

### 8.1 프로젝트 명세서
- `docs/Backend_프로젝트_현황_명세서.md` - Backend 상세 명세
- `docs/Front_PROJECT_SPECIFICATION.md` - Frontend 상세 명세
- `docs/FINALFINAL.md` - 전체 프로젝트 통합 명세서
- `docs/PROJECT_API_SUMMARY.md` - API 사용 현황 정리

### 8.2 구현 가이드
- `docs/PHASE5_SETUP.md` - Phase 5 설정 및 구현 가이드
- `docs/GPT-SoVITS WebAPI(api_v2.py).md` - GPT-SoVITS API 문서

### 8.3 기타 문서
- `docs/LLM_SERVICE_COMPARISON.md` - LLM 서비스 비교
- `madcamp-Screening-Humanity-BACK/implementation_plan.md` - Backend 구현 계획

---

## 9. 실제 코드 확인 결과 요약

### 9.1 Backend 실제 상태

**구현 완료**:
- ✅ 기본 인프라, 인증, 데이터 모델, API 엔드포인트 구조
- ✅ 인증 시스템: JWT HttpOnly Cookie 기반 인증 통합 완료
- ✅ 로그인/로그아웃 플로우 정리 완료

**부분 구현**:
- ✅ `chat.py`: 실제 API 호출 구현 완료 (Ollama 기준), vLLM 코드 주석 처리됨, TTS 통합 완료, 페르소나 전달 방식 개선 완료

**미구현**:
- ❌ `app/services/context_manager.py` 없음
- ❌ `app/core/rate_limiter.py` 없음
- ✅ `app/api/tts.py` 구현 완료

### 9.2 Frontend 실제 상태

**구현 완료**:
- ✅ 기본 인프라, 인증, 컴포넌트, API 클라이언트, 훅

**부분 구현**:
- ✅ `chat-room.tsx`: 실제 API 연동 완료, TTS 통합 완료, 세션 관리 완료, 턴 제한 설정화 완료

**미구현**:
- 없음 (모든 주요 기능 구현 완료)

### 9.3 문서 간 불일치

1. **API 경로**: ✅ Backend `/api`와 Frontend `/api` 통일 완료
2. **모델 이름**: ✅ 문서 `gemma-3-27b-it`와 코드 일치 확인 완료
3. **인증 시스템**: ✅ Backend JWT 기반으로 통일 완료, NextAuth.js 제거 완료

**상세 내용**: `docs/프로젝트_정합성_확인_및_미구현_항목_정리.md` 참조

---

## 10. 변경 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.11 | 2026-01-26 | 서버 에러 해결 및 백엔드 Gemini SDK 도입 - 프론트엔드 500 에러 해결 (/api/characters API 비동기 처리 개선), 백엔드 Gemini SDK 도입 (google-generativeai 패키지 추가 및 적용), 백엔드 SDK 고도화 (Safety Settings, JSON Mode 적용), 환경변수 기반 설정 (GOOGLE_API_KEY, GOOGLE_API_MODEL, GOOGLE_SAFETY_THRESHOLD), 참고 문서 추가 (Gemini API 사용 가이드 및 모델 버전 문서) |
| 1.10 | 2026-01-26 | 캐릭터 생성 위저드 개편 반영 - Step 1 간소화 (이름, 카테고리, 작품명 3가지만 입력), '다음' 버튼 클릭 시 AI 자동 생성, Step 2 통합 편집 (모든 정보 한 화면에서 수정), AI 재생성 횟수 제한 (총 3회), 작품명 필드 추가 (source_work), worldview 필드 추가 (9종 캐릭터 모두) |
| 1.9 | 2026-01-26 | 캐릭터 시스템 고도화 작업 완료 반영 - 데이터 구조 세분화 (persona → 10개 이상의 상세 필드), 파일 기반 관리 시스템 (public/characters/*.json API Route), AI 자동 완성 기능 고도화 (generateCharacterSpec), 프론트엔드 UI/UX 혁신 (CharacterCreationWizard 개편), 시스템 최적화 (페르소나 빌더 시스템), 9종 캐릭터 데이터 마이그레이션 완료 |
| 1.8 | 2026-01-26 | 인증 제거 및 프롬프트 전달 수정 반영 - `/api/chat`, `/api/tts`, `/api/characters/*` 모든 엔드포인트 인증 제거, 프론트엔드에서 persona, scenario, session_id, character_id 전달 확인, 백엔드에서 request.persona를 system 메시지로 포맷팅 확인 |
| 1.7 | 2026-01-26 | 로그인/로그아웃 시스템 통합 완료 - Backend JWT HttpOnly Cookie 설정, Frontend NextAuth.js 제거, 인증 콜백 라우트 구현, API 클라이언트 쿠키 전달 설정, 로그아웃 엔드포인트 추가 |
| 1.6 | 2026-01-26 | Ollama 기준으로 API 구현 변경 - vLLM 코드 주석 처리, Ollama를 기본 LLM 서비스로 설정 (LLM_SERVICE 기본값: ollama), GPU_SERVER_URL 환경 변수 제거, chat.py Ollama 기준으로 재구현 |
| 1.5 | 2026-01-26 | API 경로 통일 완료 - Frontend를 `/api`로 변경 (`lib/api/client.ts`), Backend는 이미 `/api` 사용 중 확인 |
| 1.4 | 2026-01-26 | Backend Mock 응답 제거 및 실제 API 호출 구현 완료 - chat.py 수정, vLLM/Ollama 분기 처리, 에러 처리 강화, session_id 지원 |
| 1.3 | 2026-01-26 | Server A 연동 상태 업데이트 - vLLM 서버 실행, GPT-SoVITS WebAPI 구동, NPM 설정 완료 반영 |
| 1.2 | 2026-01-26 | 문서 정합성 작업: API 경로 해결 방안 명확화 (Frontend를 `/api`로 변경), 모델 이름 통일 |
| 1.1 | 2026-01-26 | 실제 코드 확인 결과 반영, 문서 간 불일치 사항 추가 |
| 1.0 | 2026-01-26 | 초기 문서 작성 (Backend + Frontend 통합 진행상황) |

---

**문서 버전**: 1.11  
**최종 업데이트**: 2026-01-26  
**검증 완료**: 실제 코드베이스 확인 완료, 문서 정합성 작업 완료 (2026-01-26)  
**작성자**: AI Assistant
